{"ast":null,"code":"import React, { useRef } from 'react';\n\n// vector add\nfunction addV(v1, v2) {\n  return v1.map(function (v, i) {\n    return v + v2[i];\n  });\n} // vector substract\n\nfunction subV(v1, v2) {\n  return v1.map(function (v, i) {\n    return v - v2[i];\n  });\n}\n/**\r\n * Calculates distance\r\n * @param movement the difference between current and initial vectors\r\n * @returns distance\r\n */\n\nfunction calculateDistance(movement) {\n  return Math.hypot.apply(Math, movement);\n}\nfunction calculateAllGeometry(movement, delta) {\n  if (delta === void 0) {\n    delta = movement;\n  }\n  var dl = calculateDistance(delta);\n  var alpha = dl === 0 ? 0 : 1 / dl;\n  var direction = delta.map(function (v) {\n    return alpha * v;\n  });\n  var distance = calculateDistance(movement);\n  return {\n    distance: distance,\n    direction: direction\n  };\n}\n/**\r\n * Calculates all kinematics\r\n * @template T the expected vector type\r\n * @param movement the difference between current and initial vectors\r\n * @param delta the difference between current and previous vectors\r\n * @param delta_t the time difference between current and previous timestamps\r\n * @returns all kinematics\r\n */\n\nfunction calculateAllKinematics(movement, delta, dt) {\n  var dl = calculateDistance(delta);\n  var alpha = dl === 0 ? 0 : 1 / dl;\n  var beta = dt === 0 ? 0 : 1 / dt;\n  var velocity = beta * dl;\n  var velocities = delta.map(function (v) {\n    return beta * v;\n  });\n  var direction = delta.map(function (v) {\n    return alpha * v;\n  });\n  var distance = calculateDistance(movement);\n  return {\n    velocities: velocities,\n    velocity: velocity,\n    distance: distance,\n    direction: direction\n  };\n}\n/**\r\n * Because IE doesn't support `Math.sign` function, so we use the polyfill version of the function.\r\n * This polyfill function is suggested by Mozilla:\r\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign#Polyfill\r\n * @param x target number\r\n */\n\nfunction sign(x) {\n  if (Math.sign) return Math.sign(x);\n  return Number(x > 0) - Number(x < 0) || +x;\n}\nfunction minMax(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n} // Based on @aholachek ;)\n// https://twitter.com/chpwn/status/285540192096497664\n// iOS constant = 0.55\n// https://medium.com/@nathangitter/building-fluid-interfaces-ios-swift-9732bb934bf5\n\nfunction rubberband2(distance, constant) {\n  // default constant from the article is 0.7\n  return Math.pow(distance, constant * 5);\n}\nfunction rubberband(distance, dimension, constant) {\n  if (dimension === 0 || Math.abs(dimension) === Infinity) return rubberband2(distance, constant);\n  return distance * dimension * constant / (dimension + constant * distance);\n}\nfunction rubberbandIfOutOfBounds(position, min, max, constant) {\n  if (constant === void 0) {\n    constant = 0.15;\n  }\n  if (constant === 0) return minMax(position, min, max);\n  if (position < min) return -rubberband(min - position, max - min, constant) + min;\n  if (position > max) return +rubberband(position - max, max - min, constant) + max;\n  return position;\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it;\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  it = o[Symbol.iterator]();\n  return it.next.bind(it);\n}\nfunction noop() {}\n/**\r\n * TODO Beware that only optimized cases are covered in tests =)\r\n * TODO Need to cover general case as well\r\n *\r\n * @param fns\r\n */\n\nfunction chainFns() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    var result;\n    for (var _iterator = _createForOfIteratorHelperLoose(fns), _step; !(_step = _iterator()).done;) {\n      var fn = _step.value;\n      result = fn.apply(this, arguments) || result;\n    }\n    return result;\n  };\n}\n/**\r\n * Expects a simple value or 2D vector (an array with 2 elements) and\r\n * always returns 2D vector. If simple value is passed, returns a\r\n * vector with this value as both coordinates.\r\n *\r\n * @param value\r\n */\n\nfunction ensureVector(value, fallback) {\n  if (value === undefined) {\n    if (fallback === undefined) {\n      throw new Error('Must define fallback value if undefined is expected');\n    }\n    value = fallback;\n  }\n  if (Array.isArray(value)) return value;\n  return [value, value];\n}\n/**\r\n * Helper for defining a default value\r\n *\r\n * @param value\r\n * @param fallback\r\n */\n\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n/**\r\n * Resolves getters (functions) by calling them\r\n * If simple value is given it just passes through\r\n *\r\n * @param v\r\n */\n\nfunction valueFn(v) {\n  if (typeof v === 'function') {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    // @ts-ignore\n    return v.apply(void 0, args);\n  } else {\n    return v;\n  }\n}\nfunction resolveWith(config, resolvers) {\n  if (config === void 0) {\n    config = {};\n  }\n  var result = {};\n  for (var _i = 0, _Object$entries = Object.entries(resolvers); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _Object$entries[_i],\n      key = _Object$entries$_i[0],\n      resolver = _Object$entries$_i[1];\n    switch (typeof resolver) {\n      case 'function':\n        result[key] = resolver.call(result, config[key], key, config);\n        break;\n      case 'object':\n        result[key] = resolveWith(config[key], resolver);\n        break;\n      case 'boolean':\n        if (resolver) result[key] = config[key];\n        break;\n    }\n  }\n  return result;\n}\n\n/**\r\n * Whether the browser supports GestureEvent (ie Safari)\r\n * @returns true if the browser supports gesture event\r\n */\nfunction supportsGestureEvents() {\n  try {\n    // TODO [TS] possibly find GestureEvent definitions?\n    // @ts-ignore: no type definitions for webkit GestureEvents\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\nfunction supportsTouchEvents() {\n  return typeof window !== 'undefined' && 'ontouchstart' in window;\n}\nfunction supportsPointerEvents() {\n  return typeof window !== 'undefined' && 'onpointerdown' in window;\n}\nfunction getEventTouches(event) {\n  if ('pointerId' in event) return null;\n  return event.type === 'touchend' ? event.changedTouches : event.targetTouches;\n}\nfunction getTouchIds(event) {\n  return Array.from(getEventTouches(event)).map(function (t) {\n    return t.identifier;\n  });\n}\nfunction getGenericEventData(event) {\n  var buttons = 'buttons' in event ? event.buttons : 0;\n  var shiftKey = event.shiftKey,\n    altKey = event.altKey,\n    metaKey = event.metaKey,\n    ctrlKey = event.ctrlKey; // TODO check if this might create some overrides?\n\n  return {\n    buttons: buttons,\n    shiftKey: shiftKey,\n    altKey: altKey,\n    metaKey: metaKey,\n    ctrlKey: ctrlKey\n  };\n}\nvar identity = function identity(xy) {\n  return xy;\n};\n/**\r\n * Gets pointer event values.\r\n * @param event\r\n * @returns pointer event values\r\n */\n\nfunction getPointerEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n  var touchEvents = getEventTouches(event);\n  var _ref = touchEvents ? touchEvents[0] : event,\n    clientX = _ref.clientX,\n    clientY = _ref.clientY;\n  return transform([clientX, clientY]);\n}\n/**\r\n * Gets two touches event data\r\n * @param event\r\n * @returns two touches event data\r\n */\n\nfunction getTwoTouchesEventValues(event, pointerIds, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n  var _Array$from$filter = Array.from(event.touches).filter(function (t) {\n      return pointerIds.includes(t.identifier);\n    }),\n    A = _Array$from$filter[0],\n    B = _Array$from$filter[1];\n  if (!A || !B) throw Error(\"The event doesn't have two pointers matching the pointerIds\");\n  var dx = B.clientX - A.clientX;\n  var dy = B.clientY - A.clientY;\n  var cx = (B.clientX + A.clientX) / 2;\n  var cy = (B.clientY + A.clientY) / 2; // const e: any = 'nativeEvent' in event ? event.nativeEvent : event\n\n  var distance = Math.hypot(dx, dy); // FIXME rotation has inconsistant values so we're not using it atm\n  // const angle = (e.rotation as number) ?? -(Math.atan2(dx, dy) * 180) / Math.PI\n\n  var angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  var values = transform([distance, angle]);\n  var origin = transform([cx, cy]);\n  return {\n    values: values,\n    origin: origin\n  };\n}\n/**\r\n * Gets scroll event values\r\n * @param event\r\n * @returns scroll event values\r\n */\n\nfunction getScrollEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n\n  // If the currentTarget is the window then we return the scrollX/Y position.\n  // If not (ie the currentTarget is a DOM element), then we return scrollLeft/Top\n  var _event$currentTarget = event.currentTarget,\n    scrollX = _event$currentTarget.scrollX,\n    scrollY = _event$currentTarget.scrollY,\n    scrollLeft = _event$currentTarget.scrollLeft,\n    scrollTop = _event$currentTarget.scrollTop;\n  return transform([scrollX || scrollLeft || 0, scrollY || scrollTop || 0]);\n} // wheel delta defaults from https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\n\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n/**\r\n * Gets wheel event values.\r\n * @param event\r\n * @returns wheel event values\r\n */\n\nfunction getWheelEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n  var deltaX = event.deltaX,\n    deltaY = event.deltaY,\n    deltaMode = event.deltaMode; // normalize wheel values, especially for Firefox\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n  return transform([deltaX, deltaY]);\n}\n/**\r\n * Gets webkit gesture event values.\r\n * @param event\r\n * @returns webkit gesture event values\r\n */\n\nfunction getWebkitGestureEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n  return transform([event.scale, event.rotation]);\n}\nvar DEFAULT_DRAG_DELAY = 180;\nvar DEFAULT_RUBBERBAND = 0.15;\nvar DEFAULT_SWIPE_VELOCITY = 0.5;\nvar DEFAULT_SWIPE_DISTANCE = 50;\nvar DEFAULT_SWIPE_DURATION = 250;\nvar InternalGestureOptionsNormalizers = {\n  threshold: function threshold(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n    return ensureVector(value);\n  },\n  rubberband: function rubberband(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n    switch (value) {\n      case true:\n        return ensureVector(DEFAULT_RUBBERBAND);\n      case false:\n        return ensureVector(0);\n      default:\n        return ensureVector(value);\n    }\n  },\n  enabled: function enabled(value) {\n    if (value === void 0) {\n      value = true;\n    }\n    return value;\n  },\n  triggerAllEvents: function triggerAllEvents(value) {\n    if (value === void 0) {\n      value = false;\n    }\n    return value;\n  },\n  initial: function initial(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n    if (typeof value === 'function') return value;\n    return ensureVector(value);\n  },\n  transform: true\n};\nvar InternalCoordinatesOptionsNormalizers = /*#__PURE__*/_extends({}, InternalGestureOptionsNormalizers, {\n  axis: true,\n  lockDirection: function lockDirection(value) {\n    if (value === void 0) {\n      value = false;\n    }\n    return value;\n  },\n  bounds: function bounds(value) {\n    if (value === void 0) {\n      value = {};\n    }\n    if (typeof value === 'function') return function (state) {\n      return InternalCoordinatesOptionsNormalizers.bounds(value(state));\n    };\n    var _value2 = value,\n      _value2$left = _value2.left,\n      left = _value2$left === void 0 ? -Infinity : _value2$left,\n      _value2$right = _value2.right,\n      right = _value2$right === void 0 ? Infinity : _value2$right,\n      _value2$top = _value2.top,\n      top = _value2$top === void 0 ? -Infinity : _value2$top,\n      _value2$bottom = _value2.bottom,\n      bottom = _value2$bottom === void 0 ? Infinity : _value2$bottom;\n    return [[left, right], [top, bottom]];\n  }\n});\nvar isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\nvar InternalGenericOptionsNormalizers = {\n  enabled: function enabled(value) {\n    if (value === void 0) {\n      value = true;\n    }\n    return value;\n  },\n  domTarget: true,\n  window: /*#__PURE__*/function (_window) {\n    function window(_x) {\n      return _window.apply(this, arguments);\n    }\n    window.toString = function () {\n      return _window.toString();\n    };\n    return window;\n  }(function (value) {\n    if (value === void 0) {\n      value = isBrowser ? window : undefined;\n    }\n    return value;\n  }),\n  eventOptions: function eventOptions(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      _ref$passive = _ref.passive,\n      passive = _ref$passive === void 0 ? true : _ref$passive,\n      _ref$capture = _ref.capture,\n      capture = _ref$capture === void 0 ? false : _ref$capture;\n    return {\n      passive: passive,\n      capture: capture\n    };\n  },\n  transform: true\n};\nvar InternalDistanceAngleOptionsNormalizers = /*#__PURE__*/_extends({}, InternalGestureOptionsNormalizers, {\n  bounds: function bounds(_value, _key, _ref2) {\n    var _ref2$distanceBounds = _ref2.distanceBounds,\n      distanceBounds = _ref2$distanceBounds === void 0 ? {} : _ref2$distanceBounds,\n      _ref2$angleBounds = _ref2.angleBounds,\n      angleBounds = _ref2$angleBounds === void 0 ? {} : _ref2$angleBounds;\n    var _distanceBounds = function _distanceBounds(state) {\n      var D = assignDefault(valueFn(distanceBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n    var _angleBounds = function _angleBounds(state) {\n      var A = assignDefault(valueFn(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n    if (typeof distanceBounds !== 'function' && typeof angleBounds !== 'function') return [_distanceBounds(), _angleBounds()];\n    return function (state) {\n      return [_distanceBounds(state), _angleBounds(state)];\n    };\n  }\n});\nvar InternalDragOptionsNormalizers = /*#__PURE__*/_extends({}, InternalCoordinatesOptionsNormalizers, {\n  useTouch: function useTouch(value) {\n    if (value === void 0) {\n      value = false;\n    }\n    var supportsTouch = supportsTouchEvents();\n    var supportsPointer = supportsPointerEvents();\n    if (value && supportsTouch) return true;\n    if (supportsTouch && !supportsPointer) return true;\n    return false;\n  },\n  experimental_preventWindowScrollY: function experimental_preventWindowScrollY(value) {\n    if (value === void 0) {\n      value = false;\n    }\n    return value;\n  },\n  threshold: function threshold(v, _k, _ref3) {\n    var _ref3$filterTaps = _ref3.filterTaps,\n      filterTaps = _ref3$filterTaps === void 0 ? false : _ref3$filterTaps,\n      _ref3$lockDirection = _ref3.lockDirection,\n      lockDirection = _ref3$lockDirection === void 0 ? false : _ref3$lockDirection,\n      _ref3$axis = _ref3.axis,\n      axis = _ref3$axis === void 0 ? undefined : _ref3$axis;\n    var A = ensureVector(v, filterTaps ? 3 : lockDirection ? 1 : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    return A;\n  },\n  swipeVelocity: function swipeVelocity(v) {\n    if (v === void 0) {\n      v = DEFAULT_SWIPE_VELOCITY;\n    }\n    return ensureVector(v);\n  },\n  swipeDistance: function swipeDistance(v) {\n    if (v === void 0) {\n      v = DEFAULT_SWIPE_DISTANCE;\n    }\n    return ensureVector(v);\n  },\n  swipeDuration: function swipeDuration(value) {\n    if (value === void 0) {\n      value = DEFAULT_SWIPE_DURATION;\n    }\n    return value;\n  },\n  delay: function delay(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n      case false:\n        return 0;\n      default:\n        return value;\n    }\n  }\n});\nfunction getInternalGenericOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  // TODO warn when passive is set to true and domTarget is undefined\n  return resolveWith(config, InternalGenericOptionsNormalizers);\n}\nfunction getInternalCoordinatesOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n  return resolveWith(config, InternalCoordinatesOptionsNormalizers);\n}\nfunction getInternalDistanceAngleOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n  return resolveWith(config, InternalDistanceAngleOptionsNormalizers);\n}\nfunction getInternalDragOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n  return resolveWith(config, InternalDragOptionsNormalizers);\n}\nfunction _buildMoveConfig(_ref) {\n  var domTarget = _ref.domTarget,\n    eventOptions = _ref.eventOptions,\n    window = _ref.window,\n    enabled = _ref.enabled,\n    rest = _objectWithoutPropertiesLoose(_ref, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.move = getInternalCoordinatesOptions(rest);\n  return opts;\n}\nfunction _buildHoverConfig(_ref2) {\n  var domTarget = _ref2.domTarget,\n    eventOptions = _ref2.eventOptions,\n    window = _ref2.window,\n    enabled = _ref2.enabled,\n    rest = _objectWithoutPropertiesLoose(_ref2, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.hover = _extends({\n    enabled: true\n  }, rest);\n  return opts;\n}\nfunction _buildDragConfig(_ref3) {\n  var domTarget = _ref3.domTarget,\n    eventOptions = _ref3.eventOptions,\n    window = _ref3.window,\n    enabled = _ref3.enabled,\n    rest = _objectWithoutPropertiesLoose(_ref3, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.drag = getInternalDragOptions(rest);\n  return opts;\n}\nfunction _buildPinchConfig(_ref4) {\n  var domTarget = _ref4.domTarget,\n    eventOptions = _ref4.eventOptions,\n    window = _ref4.window,\n    enabled = _ref4.enabled,\n    rest = _objectWithoutPropertiesLoose(_ref4, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.pinch = getInternalDistanceAngleOptions(rest);\n  return opts;\n}\nfunction _buildScrollConfig(_ref5) {\n  var domTarget = _ref5.domTarget,\n    eventOptions = _ref5.eventOptions,\n    window = _ref5.window,\n    enabled = _ref5.enabled,\n    rest = _objectWithoutPropertiesLoose(_ref5, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.scroll = getInternalCoordinatesOptions(rest);\n  return opts;\n}\nfunction _buildWheelConfig(_ref6) {\n  var domTarget = _ref6.domTarget,\n    eventOptions = _ref6.eventOptions,\n    window = _ref6.window,\n    enabled = _ref6.enabled,\n    rest = _objectWithoutPropertiesLoose(_ref6, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.wheel = getInternalCoordinatesOptions(rest);\n  return opts;\n}\nfunction buildComplexConfig(config, actions) {\n  if (config === void 0) {\n    config = {};\n  }\n  if (actions === void 0) {\n    actions = new Set();\n  }\n  var _config = config,\n    drag = _config.drag,\n    wheel = _config.wheel,\n    move = _config.move,\n    scroll = _config.scroll,\n    pinch = _config.pinch,\n    hover = _config.hover,\n    eventOptions = _config.eventOptions,\n    window = _config.window,\n    transform = _config.transform,\n    domTarget = _config.domTarget,\n    enabled = _config.enabled;\n  var mergedConfig = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    transform: transform,\n    window: window,\n    enabled: enabled\n  });\n  if (actions.has('onDrag')) mergedConfig.drag = getInternalDragOptions(drag);\n  if (actions.has('onWheel')) mergedConfig.wheel = getInternalCoordinatesOptions(wheel);\n  if (actions.has('onScroll')) mergedConfig.scroll = getInternalCoordinatesOptions(scroll);\n  if (actions.has('onMove')) mergedConfig.move = getInternalCoordinatesOptions(move);\n  if (actions.has('onPinch')) mergedConfig.pinch = getInternalDistanceAngleOptions(pinch);\n  if (actions.has('onHover')) mergedConfig.hover = _extends({\n    enabled: true\n  }, hover);\n  return mergedConfig;\n}\nfunction getInitial(mixed) {\n  return _extends({\n    _active: false,\n    _blocked: false,\n    _intentional: [false, false],\n    _movement: [0, 0],\n    _initial: [0, 0],\n    _bounds: [[-Infinity, Infinity], [-Infinity, Infinity]],\n    _threshold: [0, 0],\n    _lastEventType: undefined,\n    _dragStarted: false,\n    _dragPreventScroll: false,\n    _dragIsTap: true,\n    _dragDelayed: false,\n    event: undefined,\n    intentional: false,\n    values: [0, 0],\n    velocities: [0, 0],\n    delta: [0, 0],\n    movement: [0, 0],\n    offset: [0, 0],\n    lastOffset: [0, 0],\n    direction: [0, 0],\n    initial: [0, 0],\n    previous: [0, 0],\n    first: false,\n    last: false,\n    active: false,\n    timeStamp: 0,\n    startTime: 0,\n    elapsedTime: 0,\n    cancel: noop,\n    canceled: false,\n    memo: undefined,\n    args: undefined\n  }, mixed);\n}\nfunction getInitialState() {\n  var shared = {\n    hovering: false,\n    scrolling: false,\n    wheeling: false,\n    dragging: false,\n    moving: false,\n    pinching: false,\n    touches: 0,\n    buttons: 0,\n    down: false,\n    shiftKey: false,\n    altKey: false,\n    metaKey: false,\n    ctrlKey: false,\n    locked: false\n  };\n  var drag = getInitial({\n    _pointerId: undefined,\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0,\n    tap: false,\n    swipe: [0, 0]\n  });\n  var pinch = getInitial({\n    // @ts-expect-error when used _pointerIds we can assert its type will be [number, number]\n    _pointerIds: [],\n    da: [0, 0],\n    vdva: [0, 0],\n    // @ts-expect-error origin can never be passed as undefined in userland\n    origin: undefined,\n    turns: 0\n  });\n  var wheel = getInitial({\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0\n  });\n  var move = getInitial({\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0\n  });\n  var scroll = getInitial({\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0\n  });\n  return {\n    shared: shared,\n    drag: drag,\n    pinch: pinch,\n    wheel: wheel,\n    move: move,\n    scroll: scroll\n  };\n}\nvar RecognizersMap = /*#__PURE__*/new Map();\nvar identity$1 = function identity(xy) {\n  return xy;\n};\n/**\r\n * @private\r\n * Recognizer abstract class.\r\n */\n\nvar Recognizer = /*#__PURE__*/function () {\n  /**\r\n   * Creates an instance of a gesture recognizer.\r\n   * @param stateKey drag, move, pinch, etc.\r\n   * @param controller the controller attached to the gesture\r\n   * @param [args] the args that should be passed to the gesture handler\r\n   */\n  function Recognizer(controller, args) {\n    var _this = this;\n    if (args === void 0) {\n      args = [];\n    }\n    this.controller = controller;\n    this.args = args;\n    this.debounced = true; // Convenience method to set a timeout for a given gesture\n\n    this.setTimeout = function (callback, ms) {\n      var _window;\n      if (ms === void 0) {\n        ms = 140;\n      }\n      clearTimeout(_this.controller.timeouts[_this.stateKey]);\n      for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n      _this.controller.timeouts[_this.stateKey] = (_window = window).setTimeout.apply(_window, [callback, ms].concat(args));\n    }; // Convenience method to clear a timeout for a given gesture\n\n    this.clearTimeout = function () {\n      clearTimeout(_this.controller.timeouts[_this.stateKey]);\n    };\n    /**\r\n     * Fires the gesture handler\r\n     */\n\n    this.fireGestureHandler = function (forceFlag) {\n      if (forceFlag === void 0) {\n        forceFlag = false;\n      }\n\n      /**\r\n       * If the gesture has been blocked (this can happen when the gesture has started in an unwanted direction),\r\n       * clean everything and don't do anything.\r\n       */\n      if (_this.state._blocked) {\n        // we need debounced gestures to end by themselves\n        if (!_this.debounced) {\n          _this.state._active = false;\n          _this.clean();\n        }\n        return null;\n      } // If the gesture has no intentional dimension, don't fire the handler.\n\n      if (!forceFlag && !_this.state.intentional && !_this.config.triggerAllEvents) return null;\n      if (_this.state.intentional) {\n        var prev_active = _this.state.active;\n        var next_active = _this.state._active;\n        _this.state.active = next_active;\n        _this.state.first = next_active && !prev_active;\n        _this.state.last = prev_active && !next_active;\n        _this.controller.state.shared[_this.ingKey] = next_active; // Sets dragging, pinching, etc. to the gesture active state\n      }\n      var touches = _this.controller.pointerIds.size || _this.controller.touchIds.size;\n      var down = _this.controller.state.shared.buttons > 0 || touches > 0;\n      var state = _extends({}, _this.controller.state.shared, _this.state, _this.mapStateValues(_this.state), {\n        locked: !!document.pointerLockElement,\n        touches: touches,\n        down: down\n      }); // @ts-expect-error\n\n      var newMemo = _this.handler(state); // Sets memo to the returned value of the handler (unless it's not undefined)\n\n      _this.state.memo = newMemo !== void 0 ? newMemo : _this.state.memo;\n      return state;\n    };\n    this.controller = controller;\n    this.args = args;\n  } // Returns the gesture config\n\n  var _proto = Recognizer.prototype;\n\n  // Convenience method to update the shared state\n  _proto.updateSharedState = function updateSharedState(sharedState) {\n    Object.assign(this.controller.state.shared, sharedState);\n  } // Convenience method to update the gesture state\n  ;\n  _proto.updateGestureState = function updateGestureState(gestureState) {\n    Object.assign(this.state, gestureState);\n  }\n  /**\r\n   * Returns state properties depending on the movement and state.\r\n   *\r\n   * Should be overriden for custom behavior, doesn't do anything in the implementation\r\n   * below.\r\n   */;\n  _proto.checkIntentionality = function checkIntentionality(_intentional, _movement) {\n    return {\n      _intentional: _intentional,\n      _blocked: false\n    };\n  }\n  /**\r\n   * Returns basic movement properties for the gesture based on the next values and current state.\r\n   */;\n  _proto.getMovement = function getMovement(values) {\n    var rubberband = this.config.rubberband;\n    var _this$state = this.state,\n      _bounds = _this$state._bounds,\n      _initial = _this$state._initial,\n      _active = _this$state._active,\n      wasIntentional = _this$state._intentional,\n      lastOffset = _this$state.lastOffset,\n      prevMovement = _this$state.movement,\n      _T = _this$state._threshold;\n    var M = this.getInternalMovement(values, this.state);\n    var i0 = wasIntentional[0] === false ? getIntentionalDisplacement(M[0], _T[0]) : wasIntentional[0];\n    var i1 = wasIntentional[1] === false ? getIntentionalDisplacement(M[1], _T[1]) : wasIntentional[1]; // Get gesture specific state properties based on intentionality and movement.\n\n    var intentionalityCheck = this.checkIntentionality([i0, i1], M);\n    if (intentionalityCheck._blocked) {\n      return _extends({}, intentionalityCheck, {\n        _movement: M,\n        delta: [0, 0]\n      });\n    }\n    var _intentional = intentionalityCheck._intentional;\n    var _movement = M;\n    /**\r\n     * The movement sent to the handler has 0 in its dimensions when intentionality is false.\r\n     * It is calculated from the actual movement minus the threshold.\r\n     */\n\n    var movement = [_intentional[0] !== false ? M[0] - _intentional[0] : 0, _intentional[1] !== false ? M[1] - _intentional[1] : 0];\n    var offset = addV(movement, lastOffset);\n    /**\r\n     * Rubberband should be 0 when the gesture is no longer active, so that movement\r\n     * and offset can return within their bounds.\r\n     */\n\n    var _rubberband = _active ? rubberband : [0, 0];\n    movement = computeRubberband(_bounds, addV(movement, _initial), _rubberband);\n    return _extends({}, intentionalityCheck, {\n      intentional: _intentional[0] !== false || _intentional[1] !== false,\n      _initial: _initial,\n      _movement: _movement,\n      movement: movement,\n      values: values,\n      offset: computeRubberband(_bounds, offset, _rubberband),\n      delta: subV(movement, prevMovement)\n    });\n  } // Cleans the gesture. Can be overriden by gestures.\n  ;\n  _proto.clean = function clean() {\n    this.clearTimeout();\n  };\n  _createClass(Recognizer, [{\n    key: \"config\",\n    get: function get() {\n      return this.controller.config[this.stateKey];\n    } // Is the gesture enabled\n  }, {\n    key: \"enabled\",\n    get: function get() {\n      return this.controller.config.enabled && this.config.enabled;\n    } // Returns the controller state for a given gesture\n  }, {\n    key: \"state\",\n    get: function get() {\n      return this.controller.state[this.stateKey];\n    } // Returns the gesture handler\n  }, {\n    key: \"handler\",\n    get: function get() {\n      return this.controller.handlers[this.stateKey];\n    }\n  }, {\n    key: \"transform\",\n    get: function get() {\n      return this.config.transform || this.controller.config.transform || identity$1;\n    }\n  }]);\n  return Recognizer;\n}(); //--------------------------------------------\n\nfunction getIntentionalDisplacement(movement, threshold) {\n  if (Math.abs(movement) >= threshold) {\n    return sign(movement) * threshold;\n  } else {\n    return false;\n  }\n}\nfunction computeRubberband(bounds, _ref, _ref2) {\n  var Vx = _ref[0],\n    Vy = _ref[1];\n  var Rx = _ref2[0],\n    Ry = _ref2[1];\n  var _bounds$ = bounds[0],\n    X1 = _bounds$[0],\n    X2 = _bounds$[1],\n    _bounds$2 = bounds[1],\n    Y1 = _bounds$2[0],\n    Y2 = _bounds$2[1];\n  return [rubberbandIfOutOfBounds(Vx, X1, X2, Rx), rubberbandIfOutOfBounds(Vy, Y1, Y2, Ry)];\n}\n/**\r\n * Returns a generic, common payload for all gestures from an event.\r\n */\n\nfunction getGenericPayload(_ref3, event, isStartEvent) {\n  var state = _ref3.state;\n  var timeStamp = event.timeStamp,\n    _lastEventType = event.type;\n  var previous = state.values;\n  var elapsedTime = isStartEvent ? 0 : timeStamp - state.startTime;\n  return {\n    _lastEventType: _lastEventType,\n    event: event,\n    timeStamp: timeStamp,\n    elapsedTime: elapsedTime,\n    previous: previous\n  };\n}\n/**\r\n * Returns the reinitialized start state for the gesture.\r\n * Should be common to all gestures.\r\n */\n\nfunction getStartGestureState(_ref4, values, event, initial) {\n  var state = _ref4.state,\n    config = _ref4.config,\n    stateKey = _ref4.stateKey,\n    args = _ref4.args,\n    transform = _ref4.transform;\n  var offset = state.offset;\n  var startTime = event.timeStamp;\n  var initialFn = config.initial,\n    bounds = config.bounds,\n    threshold = config.threshold; // the _threshold is the difference between a [0,0] offset converted to\n  // its new space coordinates\n\n  var _threshold = subV(transform(threshold), transform([0, 0])).map(Math.abs);\n  var _state = _extends({}, getInitialState()[stateKey], {\n    _active: true,\n    args: args,\n    values: values,\n    initial: initial != null ? initial : values,\n    _threshold: _threshold,\n    offset: offset,\n    lastOffset: offset,\n    startTime: startTime\n  });\n  return _extends({}, _state, {\n    _initial: valueFn(initialFn, _state),\n    _bounds: valueFn(bounds, _state)\n  });\n}\n\n/**\r\n * The controller will keep track of the state for all gestures and also keep\r\n * track of timeouts, and window listeners.\r\n */\n\nvar Controller = function Controller(classes) {\n  var _this = this;\n  this.classes = classes;\n  this.pointerIds = new Set(); // register Pointer Events pointerIds\n\n  this.touchIds = new Set(); // register Touch Events identifiers\n\n  this.supportsTouchEvents = supportsTouchEvents();\n  this.supportsGestureEvents = supportsGestureEvents();\n  this.bind = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var bindings = {};\n    for (var _iterator = _createForOfIteratorHelperLoose(_this.classes), _step; !(_step = _iterator()).done;) {\n      var RecognizerClass = _step.value;\n      new RecognizerClass(_this, args).addBindings(bindings);\n    } // // we also add event bindings for native handlers\n\n    var _loop = function _loop(eventKey) {\n      addBindings(bindings, eventKey, function (event) {\n        return _this.nativeRefs[eventKey](_extends({}, _this.state.shared, {\n          event: event,\n          args: args\n        }));\n      });\n    };\n    for (var eventKey in _this.nativeRefs) {\n      _loop(eventKey);\n    }\n    if (_this.config.domTarget) {\n      // If config.domTarget is set we add event listeners to it and return the clean function.\n      return updateDomListeners(_this, bindings);\n    } else {\n      // If not, we return an object that contains gesture handlers mapped to react handler event keys.\n      return getPropsListener(_this, bindings);\n    }\n  };\n  this.effect = function () {\n    if (_this.config.domTarget) _this.bind();\n    return _this.clean;\n  };\n  /**\r\n   * Function ran on component unmount: cleans timeouts and removes dom listeners set by the bind function.\r\n   */\n\n  this.clean = function () {\n    var domTarget = getDomTargetFromConfig(_this.config);\n    var eventOptions = _this.config.eventOptions;\n    if (domTarget) removeListeners(domTarget, takeAll(_this.domListeners), eventOptions);\n    Object.values(_this.timeouts).forEach(clearTimeout);\n    clearAllWindowListeners(_this);\n  };\n  this.classes = classes;\n  this.state = getInitialState();\n  this.timeouts = {};\n  this.domListeners = [];\n  this.windowListeners = {};\n};\nfunction addEventIds(controller, event) {\n  if ('pointerId' in event) {\n    controller.pointerIds.add(event.pointerId);\n  } else {\n    controller.touchIds = new Set(getTouchIds(event));\n  }\n}\nfunction removeEventIds(controller, event) {\n  if ('pointerId' in event) {\n    controller.pointerIds[\"delete\"](event.pointerId);\n  } else {\n    getTouchIds(event).forEach(function (id) {\n      return controller.touchIds[\"delete\"](id);\n    });\n  }\n}\nfunction clearAllWindowListeners(controller) {\n  var _controller$config = controller.config,\n    el = _controller$config.window,\n    eventOptions = _controller$config.eventOptions,\n    windowListeners = controller.windowListeners;\n  if (!el) return;\n  for (var stateKey in windowListeners) {\n    var handlers = windowListeners[stateKey];\n    removeListeners(el, handlers, eventOptions);\n  }\n  controller.windowListeners = {};\n}\nfunction clearWindowListeners(_ref, stateKey, options) {\n  var config = _ref.config,\n    windowListeners = _ref.windowListeners;\n  if (options === void 0) {\n    options = config.eventOptions;\n  }\n  if (!config.window) return;\n  removeListeners(config.window, windowListeners[stateKey], options);\n  delete windowListeners[stateKey];\n}\nfunction updateWindowListeners(_ref2, stateKey, listeners, options) {\n  var config = _ref2.config,\n    windowListeners = _ref2.windowListeners;\n  if (listeners === void 0) {\n    listeners = [];\n  }\n  if (options === void 0) {\n    options = config.eventOptions;\n  }\n  if (!config.window) return;\n  removeListeners(config.window, windowListeners[stateKey], options);\n  addListeners(config.window, windowListeners[stateKey] = listeners, options);\n}\nfunction updateDomListeners(_ref3, bindings) {\n  var config = _ref3.config,\n    domListeners = _ref3.domListeners;\n  var domTarget = getDomTargetFromConfig(config);\n  if (!domTarget) throw new Error('domTarget must be defined');\n  var eventOptions = config.eventOptions;\n  removeListeners(domTarget, takeAll(domListeners), eventOptions);\n  for (var _i = 0, _Object$entries = Object.entries(bindings); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _Object$entries[_i],\n      key = _Object$entries$_i[0],\n      fns = _Object$entries$_i[1];\n    var name = key.slice(2).toLowerCase();\n    domListeners.push([name, chainFns.apply(void 0, fns)]);\n  }\n  addListeners(domTarget, domListeners, eventOptions);\n}\nfunction getPropsListener(_ref4, bindings) {\n  var config = _ref4.config;\n  var props = {};\n  var captureString = config.eventOptions.capture ? 'Capture' : '';\n  for (var _i2 = 0, _Object$entries2 = Object.entries(bindings); _i2 < _Object$entries2.length; _i2++) {\n    var _Object$entries2$_i = _Object$entries2[_i2],\n      event = _Object$entries2$_i[0],\n      fns = _Object$entries2$_i[1];\n    var fnsArray = Array.isArray(fns) ? fns : [fns];\n    var key = event + captureString;\n    props[key] = chainFns.apply(void 0, fnsArray);\n  }\n  return props;\n}\nfunction takeAll(array) {\n  if (array === void 0) {\n    array = [];\n  }\n  return array.splice(0, array.length);\n}\nfunction getDomTargetFromConfig(_ref5) {\n  var domTarget = _ref5.domTarget;\n  return domTarget && 'current' in domTarget ? domTarget.current : domTarget;\n}\n/**\r\n * bindings is an object which keys match ReactEventHandlerKeys.\r\n * Since a recognizer might want to bind a handler function to an event key already used by a previously\r\n * added recognizer, we need to make sure that each event key is an array of all the functions mapped for\r\n * that key.\r\n */\n\nfunction addBindings(bindings, name, fn) {\n  if (!bindings[name]) bindings[name] = [];\n  bindings[name].push(fn);\n}\nfunction addListeners(el, listeners, options) {\n  if (listeners === void 0) {\n    listeners = [];\n  }\n  if (options === void 0) {\n    options = {};\n  }\n  for (var _iterator2 = _createForOfIteratorHelperLoose(listeners), _step2; !(_step2 = _iterator2()).done;) {\n    var _step2$value = _step2.value,\n      eventName = _step2$value[0],\n      eventHandler = _step2$value[1];\n    el.addEventListener(eventName, eventHandler, options);\n  }\n}\nfunction removeListeners(el, listeners, options) {\n  if (listeners === void 0) {\n    listeners = [];\n  }\n  if (options === void 0) {\n    options = {};\n  }\n  for (var _iterator3 = _createForOfIteratorHelperLoose(listeners), _step3; !(_step3 = _iterator3()).done;) {\n    var _step3$value = _step3.value,\n      eventName = _step3$value[0],\n      eventHandler = _step3$value[1];\n    el.removeEventListener(eventName, eventHandler, options);\n  }\n}\n\n/* eslint-disable react-hooks/exhaustive-deps */\n/**\r\n * Utility hook called by all gesture hooks and that will be responsible for the internals.\r\n *\r\n * @param handlers\r\n * @param classes\r\n * @param config\r\n * @param nativeHandlers - native handlers such as onClick, onMouseDown, etc.\r\n */\n\nfunction useRecognizers(handlers, config, nativeHandlers) {\n  if (nativeHandlers === void 0) {\n    nativeHandlers = {};\n  }\n  var classes = resolveClasses(handlers);\n  var controller = React.useMemo(function () {\n    return new Controller(classes);\n  }, []);\n  controller.config = config;\n  controller.handlers = handlers;\n  controller.nativeRefs = nativeHandlers;\n  React.useEffect(controller.effect, []); // @ts-ignore\n\n  if (controller.config.domTarget) return deprecationNoticeForDomTarget; // @ts-ignore\n\n  return controller.bind;\n}\nfunction deprecationNoticeForDomTarget() {\n  if (process.env.NODE_ENV === 'development') {\n    // eslint-disable-next-line no-console\n    console.warn(\"Deprecation notice: When the `domTarget` option is specified, you don't need to write `useEffect(bind, [bind])` anymore: event binding is now made handled internally to this lib.\\n\\nNext version won't return anything when `domTarget` is provided, therefore your code will break if you try to call `useEffect`.\");\n  }\n}\nfunction resolveClasses(internalHandlers) {\n  var classes = new Set();\n  if (internalHandlers.drag) classes.add(RecognizersMap.get('drag'));\n  if (internalHandlers.wheel) classes.add(RecognizersMap.get('wheel'));\n  if (internalHandlers.scroll) classes.add(RecognizersMap.get('scroll'));\n  if (internalHandlers.move) classes.add(RecognizersMap.get('move'));\n  if (internalHandlers.pinch) classes.add(RecognizersMap.get('pinch'));\n  if (internalHandlers.hover) classes.add(RecognizersMap.get('hover'));\n  return classes;\n}\n\n/**\r\n * @private\r\n * Abstract class for coordinates-based gesture recongizers\r\n */\n\nvar CoordinatesRecognizer = /*#__PURE__*/function (_Recognizer) {\n  _inheritsLoose(CoordinatesRecognizer, _Recognizer);\n  function CoordinatesRecognizer() {\n    return _Recognizer.apply(this, arguments) || this;\n  }\n  var _proto = CoordinatesRecognizer.prototype;\n\n  /**\r\n   * Returns the real movement (without taking intentionality into account)\r\n   */\n  _proto.getInternalMovement = function getInternalMovement(values, state) {\n    return subV(values, state.initial);\n  }\n  /**\r\n   * In coordinates-based gesture, this function will detect the first intentional axis,\r\n   * lock the gesture axis if lockDirection is specified in the config, block the gesture\r\n   * if the first intentional axis doesn't match the specified axis in config.\r\n   */;\n  _proto.checkIntentionality = function checkIntentionality(_intentional, _movement) {\n    if (_intentional[0] === false && _intentional[1] === false) {\n      return {\n        _intentional: _intentional,\n        axis: this.state.axis\n      };\n    }\n    var _movement$map = _movement.map(Math.abs),\n      absX = _movement$map[0],\n      absY = _movement$map[1];\n    var axis = this.state.axis || (absX > absY ? 'x' : absX < absY ? 'y' : undefined);\n    if (!this.config.axis && !this.config.lockDirection) return {\n      _intentional: _intentional,\n      _blocked: false,\n      axis: axis\n    };\n    if (!axis) return {\n      _intentional: [false, false],\n      _blocked: false,\n      axis: axis\n    };\n    if (!!this.config.axis && axis !== this.config.axis) return {\n      _intentional: _intentional,\n      _blocked: true,\n      axis: axis\n    };\n    _intentional[axis === 'x' ? 1 : 0] = false;\n    return {\n      _intentional: _intentional,\n      _blocked: false,\n      axis: axis\n    };\n  };\n  _proto.getKinematics = function getKinematics(values, event) {\n    var state = this.getMovement(values);\n    if (!state._blocked) {\n      var dt = event.timeStamp - this.state.timeStamp;\n      Object.assign(state, calculateAllKinematics(state.movement, state.delta, dt));\n    }\n    return state;\n  };\n  _proto.mapStateValues = function mapStateValues(state) {\n    return {\n      xy: state.values,\n      vxvy: state.velocities\n    };\n  };\n  return CoordinatesRecognizer;\n}(Recognizer);\nvar TAP_DISTANCE_THRESHOLD = 3;\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\nvar DragRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(DragRecognizer, _CoordinatesRecognize);\n  function DragRecognizer() {\n    var _this;\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'dragging';\n    _this.stateKey = 'drag'; // TODO add back when setPointerCapture is widely wupported\n    // https://caniuse.com/#search=setPointerCapture\n\n    _this.setPointerCapture = function (event) {\n      // don't perform pointere capture when user wants to use touch events or\n      // when a pointerLockElement exists as this would throw an error\n      if (_this.config.useTouch || document.pointerLockElement) return;\n      var target = event.target,\n        pointerId = event.pointerId;\n      if (target && 'setPointerCapture' in target) {\n        // this would work in the DOM but doesn't with react three fiber\n        // target.addEventListener('pointermove', this.onDragChange, this.controller.config.eventOptions)\n        // @ts-expect-error\n        target.setPointerCapture(pointerId);\n      }\n      _this.updateGestureState({\n        _dragTarget: target,\n        _dragPointerId: pointerId\n      });\n    };\n    _this.releasePointerCapture = function () {\n      if (_this.config.useTouch || document.pointerLockElement) return;\n      var _this$state = _this.state,\n        _dragTarget = _this$state._dragTarget,\n        _dragPointerId = _this$state._dragPointerId;\n      if (_dragPointerId && _dragTarget && 'releasePointerCapture' in _dragTarget) {\n        // this would work in the DOM but doesn't with react three fiber\n        // target.removeEventListener('pointermove', this.onDragChange, this.controller.config.eventOptions)\n        if (!('hasPointerCapture' in _dragTarget) || _dragTarget.hasPointerCapture(_dragPointerId)) try {\n          _dragTarget.releasePointerCapture(_dragPointerId);\n        } catch (e) {}\n      }\n    };\n    _this.preventScroll = function (event) {\n      if (_this.state._dragPreventScroll && event.cancelable) {\n        event.preventDefault();\n      }\n    };\n    _this.getEventId = function (event) {\n      if (_this.config.useTouch) return event.changedTouches[0].identifier;\n      return event.pointerId;\n    };\n    _this.isValidEvent = function (event) {\n      // if we were using pointer events only event.isPrimary === 1 would suffice\n      return _this.state._pointerId === _this.getEventId(event);\n    };\n    _this.shouldPreventWindowScrollY = _this.config.experimental_preventWindowScrollY && _this.controller.supportsTouchEvents;\n    _this.setUpWindowScrollDetection = function (event) {\n      persistEvent(event); // we add window listeners that will prevent the scroll when the user has started dragging\n\n      updateWindowListeners(_this.controller, _this.stateKey, [['touchmove', _this.preventScroll], ['touchend', _this.clean.bind(_assertThisInitialized(_this))], ['touchcancel', _this.clean.bind(_assertThisInitialized(_this))]], {\n        passive: false\n      });\n      _this.setTimeout(_this.startDrag.bind(_assertThisInitialized(_this)), 250, event);\n    };\n    _this.setUpDelayedDragTrigger = function (event) {\n      _this.state._dragDelayed = true;\n      persistEvent(event);\n      _this.setTimeout(_this.startDrag.bind(_assertThisInitialized(_this)), _this.config.delay, event);\n    };\n    _this.setStartState = function (event) {\n      var values = getPointerEventValues(event, _this.transform);\n      _this.updateSharedState(getGenericEventData(event));\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        _pointerId: _this.getEventId(event)\n      }));\n      _this.updateGestureState(_this.getMovement(values));\n    };\n    _this.onDragStart = function (event) {\n      addEventIds(_this.controller, event);\n      if (!_this.enabled || _this.state._active) return;\n      _this.setStartState(event);\n      _this.setPointerCapture(event);\n      if (_this.shouldPreventWindowScrollY) _this.setUpWindowScrollDetection(event);else if (_this.config.delay > 0) _this.setUpDelayedDragTrigger(event);else _this.startDrag(event, true); // we pass the values to the startDrag event\n    };\n    _this.onDragChange = function (event) {\n      if (\n      // if the gesture was canceled or\n      _this.state.canceled ||\n      // if onDragStart wasn't fired or\n      !_this.state._active ||\n      // if the event pointerId doesn't match the one that initiated the drag\n      !_this.isValidEvent(event) ||\n      // if the event has the same timestamp as the previous event\n      // note that checking type equality is ONLY for tests \\_()_/\n      _this.state._lastEventType === event.type && event.timeStamp === _this.state.timeStamp) return;\n      var values;\n      if (document.pointerLockElement) {\n        var movementX = event.movementX,\n          movementY = event.movementY;\n        values = addV(_this.transform([movementX, movementY]), _this.state.values);\n      } else values = getPointerEventValues(event, _this.transform);\n      var kinematics = _this.getKinematics(values, event); // if startDrag hasn't fired\n\n      if (!_this.state._dragStarted) {\n        // If the gesture isn't active then respond to the event only if\n        // it's been delayed via the `delay` option, in which case start\n        // the gesture immediately.\n        if (_this.state._dragDelayed) {\n          _this.startDrag(event);\n          return;\n        } // if the user wants to prevent vertical window scroll when user starts dragging\n\n        if (_this.shouldPreventWindowScrollY) {\n          if (!_this.state._dragPreventScroll && kinematics.axis) {\n            // if the user is dragging horizontally then we should allow the drag\n            if (kinematics.axis === 'x') {\n              _this.startDrag(event);\n            } else {\n              _this.state._active = false;\n              return;\n            }\n          } else return;\n        } else return;\n      }\n      var genericEventData = getGenericEventData(event);\n      _this.updateSharedState(genericEventData);\n      var genericPayload = getGenericPayload(_assertThisInitialized(_this), event); // This verifies if the drag can be assimilated to a tap by checking\n      // if the real distance of the drag (ie not accounting for the threshold) is\n      // greater than the TAP_DISTANCE_THRESHOLD.\n\n      var realDistance = calculateDistance(kinematics._movement);\n      var _dragIsTap = _this.state._dragIsTap;\n      if (_dragIsTap && realDistance >= TAP_DISTANCE_THRESHOLD) _dragIsTap = false;\n      _this.updateGestureState(_extends({}, genericPayload, kinematics, {\n        _dragIsTap: _dragIsTap\n      }));\n      _this.fireGestureHandler();\n    };\n    _this.onDragEnd = function (event) {\n      removeEventIds(_this.controller, event); // if the event pointerId doesn't match the one that initiated the drag\n      // we don't want to end the drag\n\n      if (!_this.isValidEvent(event)) return;\n      _this.clean(); // if the gesture is no longer active (ie canceled)\n      // don't do anything\n\n      if (!_this.state._active) return;\n      _this.state._active = false;\n      var tap = _this.state._dragIsTap;\n      var _this$state$velocitie = _this.state.velocities,\n        vx = _this$state$velocitie[0],\n        vy = _this$state$velocitie[1];\n      var _this$state$movement = _this.state.movement,\n        mx = _this$state$movement[0],\n        my = _this$state$movement[1];\n      var _this$state$_intentio = _this.state._intentional,\n        ix = _this$state$_intentio[0],\n        iy = _this$state$_intentio[1];\n      var _this$config$swipeVel = _this.config.swipeVelocity,\n        svx = _this$config$swipeVel[0],\n        svy = _this$config$swipeVel[1];\n      var _this$config$swipeDis = _this.config.swipeDistance,\n        sx = _this$config$swipeDis[0],\n        sy = _this$config$swipeDis[1];\n      var sd = _this.config.swipeDuration;\n      var endState = _extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getMovement(_this.state.values));\n      var swipe = [0, 0];\n      if (endState.elapsedTime < sd) {\n        if (ix !== false && Math.abs(vx) > svx && Math.abs(mx) > sx) swipe[0] = sign(vx);\n        if (iy !== false && Math.abs(vy) > svy && Math.abs(my) > sy) swipe[1] = sign(vy);\n      }\n      _this.updateSharedState({\n        buttons: 0\n      });\n      _this.updateGestureState(_extends({}, endState, {\n        tap: tap,\n        swipe: swipe\n      }));\n      _this.fireGestureHandler(_this.config.filterTaps && tap === true);\n    };\n    _this.clean = function () {\n      _CoordinatesRecognize.prototype.clean.call(_assertThisInitialized(_this));\n      _this.state._dragStarted = false;\n      _this.releasePointerCapture();\n      clearWindowListeners(_this.controller, _this.stateKey);\n    };\n    _this.onCancel = function () {\n      if (_this.state.canceled) return;\n      _this.updateGestureState({\n        canceled: true,\n        _active: false\n      });\n      _this.updateSharedState({\n        buttons: 0\n      });\n      setTimeout(function () {\n        return _this.fireGestureHandler();\n      }, 0);\n    };\n    _this.onClick = function (event) {\n      if (!_this.state._dragIsTap) event.stopPropagation();\n    };\n    return _this;\n  }\n  var _proto = DragRecognizer.prototype;\n  _proto.startDrag = function startDrag(event, onDragIsStart) {\n    if (onDragIsStart === void 0) {\n      onDragIsStart = false;\n    }\n\n    // startDrag can happen after a timeout, so we need to check if the gesture is still active\n    // as the user might have lift up the pointer in between.\n    if (\n    // if the gesture isn't active (probably means)\n    !this.state._active ||\n    // if the drag has already started we should ignore subsequent attempts\n    this.state._dragStarted) return;\n    if (!onDragIsStart) this.setStartState(event);\n    this.updateGestureState({\n      _dragStarted: true,\n      _dragPreventScroll: true,\n      cancel: this.onCancel\n    });\n    this.clearTimeout();\n    this.fireGestureHandler();\n  };\n  _proto.addBindings = function addBindings$1(bindings) {\n    if (this.config.useTouch) {\n      addBindings(bindings, 'onTouchStart', this.onDragStart);\n      addBindings(bindings, 'onTouchMove', this.onDragChange); // this is needed for react-three-fiber\n\n      addBindings(bindings, 'onTouchEnd', this.onDragEnd);\n      addBindings(bindings, 'onTouchCancel', this.onDragEnd);\n    } else {\n      addBindings(bindings, 'onPointerDown', this.onDragStart);\n      addBindings(bindings, 'onPointerMove', this.onDragChange); // this is needed for react-three-fiber\n\n      addBindings(bindings, 'onPointerUp', this.onDragEnd);\n      addBindings(bindings, 'onPointerCancel', this.onDragEnd);\n    }\n    if (this.config.filterTaps) {\n      var handler = this.controller.config.eventOptions.capture ? 'onClick' : 'onClickCapture';\n      addBindings(bindings, handler, this.onClick);\n    }\n  };\n  return DragRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Inlined from https://github.com/alexreardon/memoize-one\r\n */\nfunction memoizeOne(resultFn, isEqual) {\n  var lastThis;\n  var lastArgs = [];\n  var lastResult;\n  var calledOnce = false;\n  function memoized() {\n    for (var _len = arguments.length, newArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      newArgs[_key] = arguments[_key];\n    }\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    }\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  }\n  return memoized;\n}\n\n/**\r\n * Taken from https://github.com/FormidableLabs/react-fast-compare\r\n *\r\n * Dropped comments and ArrayBuffer handling\r\n */\nfunction equal(a, b) {\n  if (a === b) return true;\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length !== b.length) return false;\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n      return true;\n    }\n    var it;\n    if (typeof Map === 'function' && a instanceof Map && b instanceof Map) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done) {\n        if (!b.has(i.value[0])) return false;\n      }\n      it = a.entries();\n      while (!(i = it.next()).done) {\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      }\n      return true;\n    }\n    if (typeof Set === 'function' && a instanceof Set && b instanceof Set) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done) {\n        if (!b.has(i.value[0])) return false;\n      }\n      return true;\n    }\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n    if (typeof Element !== 'undefined' && a instanceof Element) return false;\n    for (i = length; i-- !== 0;) {\n      if (keys[i] === '_owner' && a.$$typeof) continue;\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    return true;\n  } // true if both NaN, false otherwise  NaN !== NaN  true\n  // eslint-disable-next-line no-self-compare\n\n  return a !== a && b !== b;\n}\nfunction isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if ((error.message || '').match(/stack|recursion/i)) {\n      // eslint-disable-next-line no-console\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    throw error;\n  }\n}\n\n/**\r\n * Drag hook.\r\n *\r\n * @param handler - the function fired every time the drag gesture updates\r\n * @param [config={}] - the config object including generic options and drag options\r\n */\n\nfunction useDrag(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  RecognizersMap.set('drag', DragRecognizer);\n  var buildDragConfig = useRef();\n  if (!buildDragConfig.current) {\n    buildDragConfig.current = memoizeOne(_buildDragConfig, isEqual);\n  }\n  return useRecognizers({\n    drag: handler\n  }, buildDragConfig.current(config));\n}\n\n/**\r\n * @private\r\n * Abstract class for distance/angle-based gesture recongizers\r\n */\n\nvar DistanceAngleRecognizer = /*#__PURE__*/function (_Recognizer) {\n  _inheritsLoose(DistanceAngleRecognizer, _Recognizer);\n  function DistanceAngleRecognizer() {\n    return _Recognizer.apply(this, arguments) || this;\n  }\n  var _proto = DistanceAngleRecognizer.prototype;\n  _proto.getInternalMovement = function getInternalMovement(values, state) {\n    var prev_a = state.values[1]; // not be defined if ctrl+wheel is used for zoom only\n\n    var d = values[0],\n      _values$ = values[1],\n      a = _values$ === void 0 ? prev_a : _values$;\n    var delta_a = a - prev_a;\n    var next_turns = state.turns;\n    if (Math.abs(delta_a) > 270) next_turns += sign(delta_a);\n    return subV([d, a - 360 * next_turns], state.initial);\n  };\n  _proto.getKinematics = function getKinematics(values, event) {\n    var state = this.getMovement(values);\n    var turns = (values[1] - state._movement[1] - this.state.initial[1]) / 360;\n    var dt = event.timeStamp - this.state.timeStamp;\n    var _calculateAllKinemati = calculateAllKinematics(state.movement, state.delta, dt),\n      kinematics = _objectWithoutPropertiesLoose(_calculateAllKinemati, [\"distance\", \"velocity\"]);\n    return _extends({\n      turns: turns\n    }, state, kinematics);\n  };\n  _proto.mapStateValues = function mapStateValues(state) {\n    return {\n      da: state.values,\n      vdva: state.velocities\n    };\n  };\n  return DistanceAngleRecognizer;\n}(Recognizer);\nvar ZOOM_CONSTANT = 7;\nvar WEBKIT_DISTANCE_SCALE_FACTOR = 260;\nvar PinchRecognizer = /*#__PURE__*/function (_DistanceAngleRecogni) {\n  _inheritsLoose(PinchRecognizer, _DistanceAngleRecogni);\n  function PinchRecognizer() {\n    var _this;\n    _this = _DistanceAngleRecogni.apply(this, arguments) || this;\n    _this.ingKey = 'pinching';\n    _this.stateKey = 'pinch';\n    _this.onPinchStart = function (event) {\n      addEventIds(_this.controller, event);\n      var touchIds = _this.controller.touchIds;\n      if (!_this.enabled) return;\n      if (_this.state._active) {\n        // check that the pointerIds that initiated the gesture\n        // are still enabled. This is useful for when the page\n        // loses track of the pointers (minifying gesture on iPad).\n        if (_this.state._pointerIds.every(function (id) {\n          return touchIds.has(id);\n        })) return; // something was wrong with the pointers but we let it go.\n      } // until we reach two fingers on the target don't react\n\n      if (touchIds.size < 2) return;\n      var _pointerIds = Array.from(touchIds).slice(0, 2);\n      var _getTwoTouchesEventVa = getTwoTouchesEventValues(event, _pointerIds, _this.transform),\n        values = _getTwoTouchesEventVa.values,\n        origin = _getTwoTouchesEventVa.origin;\n      _this.updateSharedState(getGenericEventData(event));\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        _pointerIds: _pointerIds,\n        cancel: _this.onCancel,\n        origin: origin\n      }));\n      _this.updateGestureState(_this.getMovement(values));\n      _this.fireGestureHandler();\n    };\n    _this.onPinchChange = function (event) {\n      var _this$state = _this.state,\n        canceled = _this$state.canceled,\n        _active = _this$state._active;\n      if (canceled || !_active ||\n      // if the event has the same timestamp as the previous event\n      event.timeStamp === _this.state.timeStamp) return;\n      var genericEventData = getGenericEventData(event);\n      _this.updateSharedState(genericEventData);\n      try {\n        var _getTwoTouchesEventVa2 = getTwoTouchesEventValues(event, _this.state._pointerIds, _this.transform),\n          values = _getTwoTouchesEventVa2.values,\n          origin = _getTwoTouchesEventVa2.origin;\n        var kinematics = _this.getKinematics(values, event);\n        _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), kinematics, {\n          origin: origin\n        }));\n        _this.fireGestureHandler();\n      } catch (e) {\n        _this.onPinchEnd(event);\n      }\n    };\n    _this.onPinchEnd = function (event) {\n      removeEventIds(_this.controller, event);\n      var pointerIds = getTouchIds(event); // if none of the lifted pointerIds is in the state pointerIds don't do anything\n\n      if (_this.state._pointerIds.every(function (id) {\n        return !pointerIds.includes(id);\n      })) return;\n      _this.clean();\n      if (!_this.state._active) return;\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getMovement(_this.state.values), {\n        _active: false\n      }));\n      _this.fireGestureHandler();\n    };\n    _this.onCancel = function () {\n      if (_this.state.canceled) return;\n      _this.updateGestureState({\n        _active: false,\n        canceled: true\n      });\n      setTimeout(function () {\n        return _this.fireGestureHandler();\n      }, 0);\n    };\n    /**\r\n     * PINCH WITH WEBKIT GESTURES\r\n     */\n\n    _this.onGestureStart = function (event) {\n      if (!_this.enabled) return;\n      event.preventDefault();\n      var values = getWebkitGestureEventValues(event, _this.transform);\n      _this.updateSharedState(getGenericEventData(event));\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        origin: [event.clientX, event.clientY],\n        cancel: _this.onCancel\n      }));\n      _this.updateGestureState(_this.getMovement(values));\n      _this.fireGestureHandler();\n    };\n    _this.onGestureChange = function (event) {\n      var _this$state2 = _this.state,\n        canceled = _this$state2.canceled,\n        _active = _this$state2._active;\n      if (canceled || !_active) return;\n      event.preventDefault();\n      var genericEventData = getGenericEventData(event);\n      _this.updateSharedState(genericEventData); // this normalizes the values of the Safari's WebKitEvent by calculating\n      // the delta and then multiplying it by a constant.\n\n      var values = getWebkitGestureEventValues(event, _this.transform);\n      values[0] = (values[0] - _this.state.event.scale) * WEBKIT_DISTANCE_SCALE_FACTOR + _this.state.values[0];\n      var kinematics = _this.getKinematics(values, event);\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), kinematics, {\n        origin: [event.clientX, event.clientY]\n      }));\n      _this.fireGestureHandler();\n    };\n    _this.onGestureEnd = function (event) {\n      _this.clean();\n      if (!_this.state._active) return;\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getMovement(_this.state.values), {\n        _active: false,\n        origin: [event.clientX, event.clientY]\n      }));\n      _this.fireGestureHandler();\n    };\n    /**\r\n     * PINCH WITH WHEEL\r\n     */\n\n    _this.wheelShouldRun = function (event) {\n      return _this.enabled && event.ctrlKey;\n    };\n    _this.getWheelValuesFromEvent = function (event) {\n      var _getWheelEventValues = getWheelEventValues(event, _this.transform),\n        delta_d = _getWheelEventValues[1];\n      var _this$state$values = _this.state.values,\n        prev_d = _this$state$values[0],\n        prev_a = _this$state$values[1]; // ZOOM_CONSTANT is based on Safari trackpad natural zooming\n\n      var _delta_d = -delta_d * ZOOM_CONSTANT; // new distance is the previous state distance added to the delta\n\n      var d = prev_d + _delta_d;\n      var a = prev_a !== void 0 ? prev_a : 0;\n      return {\n        values: [d, a],\n        origin: [event.clientX, event.clientY],\n        delta: [_delta_d, a]\n      };\n    };\n    _this.onWheel = function (event) {\n      if (!_this.wheelShouldRun(event)) return;\n      _this.setTimeout(_this.onWheelEnd);\n      if (!_this.state._active) _this.onWheelStart(event);else _this.onWheelChange(event);\n    };\n    _this.onWheelStart = function (event) {\n      var _this$getWheelValuesF = _this.getWheelValuesFromEvent(event),\n        values = _this$getWheelValuesF.values,\n        delta = _this$getWheelValuesF.delta,\n        origin = _this$getWheelValuesF.origin;\n      if (event.cancelable) event.preventDefault();else if (process.env.NODE_ENV === 'development') {\n        // eslint-disable-next-line no-console\n        console.warn('To properly support zoom on trackpads, try using the `domTarget` option and `config.eventOptions.passive` set to `false`. This message will only appear in development mode.');\n      }\n      _this.updateSharedState(getGenericEventData(event));\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event, _this.state.values), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        offset: values,\n        delta: delta,\n        origin: origin\n      }));\n      _this.updateGestureState(_this.getMovement(values));\n      _this.fireGestureHandler();\n    };\n    _this.onWheelChange = function (event) {\n      if (event.cancelable) event.preventDefault();\n      _this.updateSharedState(getGenericEventData(event));\n      var _this$getWheelValuesF2 = _this.getWheelValuesFromEvent(event),\n        values = _this$getWheelValuesF2.values,\n        origin = _this$getWheelValuesF2.origin,\n        delta = _this$getWheelValuesF2.delta;\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event), {\n        origin: origin,\n        delta: delta\n      }));\n      _this.fireGestureHandler();\n    };\n    _this.onWheelEnd = function () {\n      _this.clean();\n      if (!_this.state._active) return;\n      _this.state._active = false;\n      _this.updateGestureState(_this.getMovement(_this.state.values));\n      _this.fireGestureHandler();\n    };\n    return _this;\n  }\n  var _proto = PinchRecognizer.prototype;\n  _proto.addBindings = function addBindings$1(bindings) {\n    // Only try to use gesture events when they are supported and domTarget is set\n    // as React doesn't support gesture handlers.\n    if (this.controller.config.domTarget && !this.controller.supportsTouchEvents && this.controller.supportsGestureEvents) {\n      addBindings(bindings, 'onGestureStart', this.onGestureStart);\n      addBindings(bindings, 'onGestureChange', this.onGestureChange);\n      addBindings(bindings, 'onGestureEnd', this.onGestureEnd);\n    } else {\n      addBindings(bindings, 'onTouchStart', this.onPinchStart);\n      addBindings(bindings, 'onTouchMove', this.onPinchChange);\n      addBindings(bindings, 'onTouchEnd', this.onPinchEnd);\n      addBindings(bindings, 'onTouchCancel', this.onPinchEnd);\n      addBindings(bindings, 'onWheel', this.onWheel);\n    }\n  };\n  return PinchRecognizer;\n}(DistanceAngleRecognizer);\n\n/**\r\n * Pinch hook.\r\n *\r\n * @param handler - the function fired every time the pinch gesture updates\r\n * @param [config={}] - the config object including generic options and pinch options\r\n */\n\nfunction usePinch(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  RecognizersMap.set('pinch', PinchRecognizer);\n  var buildPinchConfig = useRef();\n  if (!buildPinchConfig.current) {\n    buildPinchConfig.current = memoizeOne(_buildPinchConfig, isEqual);\n  }\n  return useRecognizers({\n    pinch: handler\n  }, buildPinchConfig.current(config));\n}\nvar WheelRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(WheelRecognizer, _CoordinatesRecognize);\n  function WheelRecognizer() {\n    var _this;\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'wheeling';\n    _this.stateKey = 'wheel';\n    _this.debounced = true;\n    _this.handleEvent = function (event) {\n      if (event.ctrlKey && 'pinch' in _this.controller.handlers) return;\n      if (!_this.enabled) return;\n      _this.setTimeout(_this.onEnd);\n      _this.updateSharedState(getGenericEventData(event));\n      var values = addV(getWheelEventValues(event, _this.transform), _this.state.values);\n      if (!_this.state._active) {\n        _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event, _this.state.values), getGenericPayload(_assertThisInitialized(_this), event, true)));\n        var movement = _this.getMovement(values);\n        var geometry = calculateAllGeometry(movement.delta);\n        _this.updateGestureState(movement);\n        _this.updateGestureState(geometry);\n      } else {\n        _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event)));\n      }\n      _this.fireGestureHandler();\n    };\n    _this.onEnd = function () {\n      _this.clean();\n      if (!_this.state._active) return;\n      var movement = _this.getMovement(_this.state.values);\n      _this.updateGestureState(movement);\n      _this.updateGestureState({\n        _active: false,\n        velocities: [0, 0],\n        velocity: 0\n      });\n      _this.fireGestureHandler();\n    };\n    return _this;\n  }\n  var _proto = WheelRecognizer.prototype;\n  _proto.addBindings = function addBindings$1(bindings) {\n    addBindings(bindings, 'onWheel', this.handleEvent);\n  };\n  return WheelRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Wheel hook.\r\n *\r\n * @param handler - the function fired every time the wheel gesture updates\r\n * @param the config object including generic options and wheel options\r\n */\n\nfunction useWheel(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  RecognizersMap.set('wheel', WheelRecognizer);\n  var buildWheelConfig = useRef();\n  if (!buildWheelConfig.current) {\n    buildWheelConfig.current = memoizeOne(_buildWheelConfig, isEqual);\n  }\n  return useRecognizers({\n    wheel: handler\n  }, buildWheelConfig.current(config));\n}\nvar MoveRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(MoveRecognizer, _CoordinatesRecognize);\n  function MoveRecognizer() {\n    var _this;\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'moving';\n    _this.stateKey = 'move';\n    _this.debounced = true;\n    _this.onMove = function (event) {\n      if (!_this.enabled) return;\n      _this.setTimeout(_this.onMoveEnd);\n      if (!_this.state._active) _this.onMoveStart(event);else _this.onMoveChange(event);\n    };\n    _this.onMoveStart = function (event) {\n      _this.updateSharedState(getGenericEventData(event));\n      var values = getPointerEventValues(event, _this.transform);\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true)));\n      _this.updateGestureState(_this.getMovement(values));\n      _this.fireGestureHandler();\n    };\n    _this.onMoveChange = function (event) {\n      _this.updateSharedState(getGenericEventData(event));\n      var values = getPointerEventValues(event, _this.transform);\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event)));\n      _this.fireGestureHandler();\n    };\n    _this.onMoveEnd = function () {\n      _this.clean();\n      if (!_this.state._active) return;\n      var values = _this.state.values;\n      _this.updateGestureState(_this.getMovement(values));\n      _this.updateGestureState({\n        velocities: [0, 0],\n        velocity: 0,\n        _active: false\n      });\n      _this.fireGestureHandler();\n    };\n    _this.hoverTransform = function () {\n      return _this.controller.config.hover.transform || _this.controller.config.transform;\n    };\n    _this.onPointerEnter = function (event) {\n      _this.controller.state.shared.hovering = true;\n      if (!_this.controller.config.enabled) return;\n      if (_this.controller.config.hover.enabled) {\n        var values = getPointerEventValues(event, _this.hoverTransform());\n        var state = _extends({}, _this.controller.state.shared, _this.state, getGenericPayload(_assertThisInitialized(_this), event, true), {\n          args: _this.args,\n          values: values,\n          active: true,\n          hovering: true\n        });\n        _this.controller.handlers.hover(_extends({}, state, _this.mapStateValues(state)));\n      }\n      if ('move' in _this.controller.handlers) _this.onMoveStart(event);\n    };\n    _this.onPointerLeave = function (event) {\n      _this.controller.state.shared.hovering = false;\n      if ('move' in _this.controller.handlers) _this.onMoveEnd();\n      if (!_this.controller.config.hover.enabled) return;\n      var values = getPointerEventValues(event, _this.hoverTransform());\n      var state = _extends({}, _this.controller.state.shared, _this.state, getGenericPayload(_assertThisInitialized(_this), event), {\n        args: _this.args,\n        values: values,\n        active: false\n      });\n      _this.controller.handlers.hover(_extends({}, state, _this.mapStateValues(state)));\n    };\n    return _this;\n  }\n  var _proto = MoveRecognizer.prototype;\n  _proto.addBindings = function addBindings$1(bindings) {\n    if ('move' in this.controller.handlers) {\n      addBindings(bindings, 'onPointerMove', this.onMove);\n    }\n    if ('hover' in this.controller.handlers) {\n      addBindings(bindings, 'onPointerEnter', this.onPointerEnter);\n      addBindings(bindings, 'onPointerLeave', this.onPointerLeave);\n    }\n  };\n  return MoveRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Move hook.\r\n *\r\n * @param handler - the function fired every time the move gesture updates\r\n * @param [config={}] - the config object including generic options and move options\r\n */\n\nfunction useMove(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  RecognizersMap.set('move', MoveRecognizer);\n  var buildMoveConfig = useRef();\n  if (!buildMoveConfig.current) {\n    buildMoveConfig.current = memoizeOne(_buildMoveConfig, isEqual);\n  }\n  return useRecognizers({\n    move: handler\n  }, buildMoveConfig.current(config));\n}\n\n/**\r\n * Hover hook.\r\n *\r\n * @param handler - the function fired every time the hover gesture updates\r\n * @param [config={}] - the config object including generic options and hover options\r\n */\n\nfunction useHover(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  RecognizersMap.set('hover', MoveRecognizer);\n  var buildHoverConfig = useRef();\n  if (!buildHoverConfig.current) {\n    buildHoverConfig.current = memoizeOne(_buildHoverConfig, isEqual);\n  }\n  return useRecognizers({\n    hover: handler\n  }, buildHoverConfig.current(config));\n}\nvar ScrollRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(ScrollRecognizer, _CoordinatesRecognize);\n  function ScrollRecognizer() {\n    var _this;\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'scrolling';\n    _this.stateKey = 'scroll';\n    _this.debounced = true;\n    _this.handleEvent = function (event) {\n      if (!_this.enabled) return;\n      _this.clearTimeout();\n      _this.setTimeout(_this.onEnd);\n      var values = getScrollEventValues(event, _this.transform);\n      _this.updateSharedState(getGenericEventData(event));\n      if (!_this.state._active) {\n        _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event, _this.state.values), getGenericPayload(_assertThisInitialized(_this), event, true)));\n        var movementDetection = _this.getMovement(values);\n        var geometry = calculateAllGeometry(movementDetection.delta);\n        _this.updateGestureState(movementDetection);\n        _this.updateGestureState(geometry);\n      } else {\n        _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event)));\n      }\n      _this.fireGestureHandler();\n    };\n    _this.onEnd = function () {\n      _this.clean();\n      if (!_this.state._active) return;\n      _this.updateGestureState(_extends({}, _this.getMovement(_this.state.values), {\n        _active: false,\n        velocities: [0, 0],\n        velocity: 0\n      }));\n      _this.fireGestureHandler();\n    };\n    return _this;\n  }\n  var _proto = ScrollRecognizer.prototype;\n  _proto.addBindings = function addBindings$1(bindings) {\n    addBindings(bindings, 'onScroll', this.handleEvent);\n  };\n  return ScrollRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Scroll hook.\r\n *\r\n * @param handler - the function fired every time the scroll gesture updates\r\n * @param [config={}] - the config object including generic options and scroll options\r\n */\n\nfunction useScroll(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  RecognizersMap.set('scroll', ScrollRecognizer);\n  var buildScrollConfig = useRef();\n  if (!buildScrollConfig.current) {\n    buildScrollConfig.current = memoizeOne(_buildScrollConfig, isEqual);\n  }\n  return useRecognizers({\n    scroll: handler\n  }, buildScrollConfig.current(config));\n}\nvar RE_NOT_NATIVE = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;\nfunction sortHandlers(handlers) {\n  var _native = {};\n  var handle = {};\n  var actions = new Set();\n  for (var key in handlers) {\n    if (RE_NOT_NATIVE.test(key)) {\n      actions.add(RegExp.lastMatch);\n      handle[key] = handlers[key];\n    } else {\n      _native[key] = handlers[key];\n    }\n  }\n  return [handle, _native, actions];\n}\n/**\r\n * @public\r\n *\r\n * The most complete gesture hook, allowing support for multiple gestures.\r\n *\r\n * @param {Handlers} handlers - an object with on[Gesture] keys containg gesture handlers\r\n * @param {UseGestureConfig} [config={}] - the full config object\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\nfunction useGesture(_handlers, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  var _sortHandlers = sortHandlers(_handlers),\n    handlers = _sortHandlers[0],\n    nativeHandlers = _sortHandlers[1],\n    actions = _sortHandlers[2];\n  RecognizersMap.set('drag', DragRecognizer);\n  RecognizersMap.set('hover', MoveRecognizer);\n  RecognizersMap.set('move', MoveRecognizer);\n  RecognizersMap.set('pinch', PinchRecognizer);\n  RecognizersMap.set('scroll', ScrollRecognizer);\n  RecognizersMap.set('wheel', WheelRecognizer);\n  var mergedConfig = buildComplexConfig(config, actions);\n  var internalHandlers = {};\n  if (actions.has('onDrag')) internalHandlers.drag = includeStartEndHandlers(handlers, 'onDrag');\n  if (actions.has('onWheel')) internalHandlers.wheel = includeStartEndHandlers(handlers, 'onWheel');\n  if (actions.has('onScroll')) internalHandlers.scroll = includeStartEndHandlers(handlers, 'onScroll');\n  if (actions.has('onMove')) internalHandlers.move = includeStartEndHandlers(handlers, 'onMove');\n  if (actions.has('onPinch')) internalHandlers.pinch = includeStartEndHandlers(handlers, 'onPinch');\n  if (actions.has('onHover')) internalHandlers.hover = handlers.onHover;\n  return useRecognizers(internalHandlers, mergedConfig, nativeHandlers);\n}\nfunction includeStartEndHandlers(handlers, handlerKey) {\n  var startKey = handlerKey + 'Start';\n  var endKey = handlerKey + 'End';\n  var fn = function fn(state) {\n    var memo = undefined;\n    if (state.first && startKey in handlers) handlers[startKey](state);\n    if (handlerKey in handlers) memo = handlers[handlerKey](state);\n    if (state.last && endKey in handlers) handlers[endKey](state);\n    return memo;\n  };\n  return fn;\n}\nexport { addV, rubberbandIfOutOfBounds, subV, useDrag, useGesture, useHover, useMove, usePinch, useScroll, useWheel };","map":{"version":3,"names":["React","useRef","addV","v1","v2","map","v","i","subV","calculateDistance","movement","Math","hypot","apply","calculateAllGeometry","delta","dl","alpha","direction","distance","calculateAllKinematics","dt","beta","velocity","velocities","sign","x","Number","minMax","value","min","max","rubberband2","constant","pow","rubberband","dimension","abs","Infinity","rubberbandIfOutOfBounds","position","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_assertThisInitialized","self","ReferenceError","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","toString","slice","name","Array","from","test","arr","len","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","isArray","done","TypeError","next","bind","noop","chainFns","_len","fns","_key","result","_iterator","_step","fn","ensureVector","fallback","undefined","Error","assignDefault","valueFn","_len2","args","_key2","resolveWith","config","resolvers","_i","_Object$entries","entries","_Object$entries$_i","resolver","supportsGestureEvents","GestureEvent","e","supportsTouchEvents","window","supportsPointerEvents","getEventTouches","event","type","changedTouches","targetTouches","getTouchIds","t","identifier","getGenericEventData","buttons","shiftKey","altKey","metaKey","ctrlKey","identity","xy","getPointerEventValues","transform","touchEvents","_ref","clientX","clientY","getTwoTouchesEventValues","pointerIds","_Array$from$filter","touches","filter","includes","A","B","dx","dy","cx","cy","angle","atan2","PI","values","origin","getScrollEventValues","_event$currentTarget","currentTarget","scrollX","scrollY","scrollLeft","scrollTop","LINE_HEIGHT","PAGE_HEIGHT","getWheelEventValues","deltaX","deltaY","deltaMode","getWebkitGestureEventValues","scale","rotation","DEFAULT_DRAG_DELAY","DEFAULT_RUBBERBAND","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","InternalGestureOptionsNormalizers","threshold","enabled","triggerAllEvents","initial","InternalCoordinatesOptionsNormalizers","axis","lockDirection","bounds","state","_value2","_value2$left","left","_value2$right","right","_value2$top","top","_value2$bottom","bottom","isBrowser","document","createElement","InternalGenericOptionsNormalizers","domTarget","_window","_x","eventOptions","_temp","_ref$passive","passive","_ref$capture","capture","InternalDistanceAngleOptionsNormalizers","_value","_ref2","_ref2$distanceBounds","distanceBounds","_ref2$angleBounds","angleBounds","_distanceBounds","D","_angleBounds","InternalDragOptionsNormalizers","useTouch","supportsTouch","supportsPointer","experimental_preventWindowScrollY","_k","_ref3","_ref3$filterTaps","filterTaps","_ref3$lockDirection","_ref3$axis","swipeVelocity","swipeDistance","swipeDuration","delay","getInternalGenericOptions","getInternalCoordinatesOptions","getInternalDistanceAngleOptions","getInternalDragOptions","_buildMoveConfig","rest","opts","move","_buildHoverConfig","hover","_buildDragConfig","drag","_buildPinchConfig","_ref4","pinch","_buildScrollConfig","_ref5","scroll","_buildWheelConfig","_ref6","wheel","buildComplexConfig","actions","Set","_config","mergedConfig","has","getInitial","mixed","_active","_blocked","_intentional","_movement","_initial","_bounds","_threshold","_lastEventType","_dragStarted","_dragPreventScroll","_dragIsTap","_dragDelayed","intentional","offset","lastOffset","previous","first","last","active","timeStamp","startTime","elapsedTime","cancel","canceled","memo","getInitialState","shared","hovering","scrolling","wheeling","dragging","moving","pinching","down","locked","_pointerId","vxvy","tap","swipe","_pointerIds","da","vdva","turns","RecognizersMap","Map","identity$1","Recognizer","controller","_this","debounced","setTimeout","callback","ms","clearTimeout","timeouts","stateKey","concat","fireGestureHandler","forceFlag","clean","prev_active","next_active","ingKey","size","touchIds","mapStateValues","pointerLockElement","newMemo","handler","_proto","updateSharedState","sharedState","updateGestureState","gestureState","checkIntentionality","getMovement","_this$state","wasIntentional","prevMovement","_T","M","getInternalMovement","i0","getIntentionalDisplacement","i1","intentionalityCheck","_rubberband","computeRubberband","get","handlers","Vx","Vy","Rx","Ry","_bounds$","X1","X2","_bounds$2","Y1","Y2","getGenericPayload","isStartEvent","getStartGestureState","initialFn","_state","Controller","classes","bindings","RecognizerClass","addBindings","_loop","eventKey","nativeRefs","updateDomListeners","getPropsListener","effect","getDomTargetFromConfig","removeListeners","takeAll","domListeners","forEach","clearAllWindowListeners","windowListeners","addEventIds","add","pointerId","removeEventIds","id","_controller$config","el","clearWindowListeners","options","updateWindowListeners","listeners","addListeners","toLowerCase","push","captureString","_i2","_Object$entries2","_Object$entries2$_i","fnsArray","array","splice","current","_iterator2","_step2","_step2$value","eventName","eventHandler","addEventListener","_iterator3","_step3","_step3$value","removeEventListener","useRecognizers","nativeHandlers","resolveClasses","useMemo","useEffect","deprecationNoticeForDomTarget","process","env","NODE_ENV","console","warn","internalHandlers","CoordinatesRecognizer","_Recognizer","_movement$map","absX","absY","getKinematics","TAP_DISTANCE_THRESHOLD","persistEvent","persist","DragRecognizer","_CoordinatesRecognize","setPointerCapture","_dragTarget","_dragPointerId","releasePointerCapture","hasPointerCapture","preventScroll","cancelable","preventDefault","getEventId","isValidEvent","shouldPreventWindowScrollY","setUpWindowScrollDetection","startDrag","setUpDelayedDragTrigger","setStartState","onDragStart","onDragChange","movementX","movementY","kinematics","genericEventData","genericPayload","realDistance","onDragEnd","_this$state$velocitie","vx","vy","_this$state$movement","mx","my","_this$state$_intentio","ix","iy","_this$config$swipeVel","svx","svy","_this$config$swipeDis","sx","sy","sd","endState","onCancel","onClick","stopPropagation","onDragIsStart","addBindings$1","memoizeOne","resultFn","isEqual","lastThis","lastArgs","lastResult","calledOnce","memoized","newArgs","equal","a","b","RegExp","flags","valueOf","Element","$$typeof","error","message","match","useDrag","set","buildDragConfig","DistanceAngleRecognizer","prev_a","d","_values$","delta_a","next_turns","_calculateAllKinemati","ZOOM_CONSTANT","WEBKIT_DISTANCE_SCALE_FACTOR","PinchRecognizer","_DistanceAngleRecogni","onPinchStart","every","_getTwoTouchesEventVa","onPinchChange","_getTwoTouchesEventVa2","onPinchEnd","onGestureStart","onGestureChange","_this$state2","onGestureEnd","wheelShouldRun","getWheelValuesFromEvent","_getWheelEventValues","delta_d","_this$state$values","prev_d","_delta_d","onWheel","onWheelEnd","onWheelStart","onWheelChange","_this$getWheelValuesF","_this$getWheelValuesF2","usePinch","buildPinchConfig","WheelRecognizer","handleEvent","onEnd","geometry","useWheel","buildWheelConfig","MoveRecognizer","onMove","onMoveEnd","onMoveStart","onMoveChange","hoverTransform","onPointerEnter","onPointerLeave","useMove","buildMoveConfig","useHover","buildHoverConfig","ScrollRecognizer","movementDetection","useScroll","buildScrollConfig","RE_NOT_NATIVE","sortHandlers","_native","handle","lastMatch","useGesture","_handlers","_sortHandlers","includeStartEndHandlers","onHover","handlerKey","startKey","endKey"],"sources":["/Users/martintomek/passive/node_modules/react-use-gesture/dist/reactusegesture.esm.js"],"sourcesContent":["import React, { useRef } from 'react';\n\n// vector add\nfunction addV(v1, v2) {\n  return v1.map(function (v, i) {\n    return v + v2[i];\n  });\n} // vector substract\n\nfunction subV(v1, v2) {\n  return v1.map(function (v, i) {\n    return v - v2[i];\n  });\n}\n/**\r\n * Calculates distance\r\n * @param movement the difference between current and initial vectors\r\n * @returns distance\r\n */\n\nfunction calculateDistance(movement) {\n  return Math.hypot.apply(Math, movement);\n}\nfunction calculateAllGeometry(movement, delta) {\n  if (delta === void 0) {\n    delta = movement;\n  }\n\n  var dl = calculateDistance(delta);\n  var alpha = dl === 0 ? 0 : 1 / dl;\n  var direction = delta.map(function (v) {\n    return alpha * v;\n  });\n  var distance = calculateDistance(movement);\n  return {\n    distance: distance,\n    direction: direction\n  };\n}\n/**\r\n * Calculates all kinematics\r\n * @template T the expected vector type\r\n * @param movement the difference between current and initial vectors\r\n * @param delta the difference between current and previous vectors\r\n * @param delta_t the time difference between current and previous timestamps\r\n * @returns all kinematics\r\n */\n\nfunction calculateAllKinematics(movement, delta, dt) {\n  var dl = calculateDistance(delta);\n  var alpha = dl === 0 ? 0 : 1 / dl;\n  var beta = dt === 0 ? 0 : 1 / dt;\n  var velocity = beta * dl;\n  var velocities = delta.map(function (v) {\n    return beta * v;\n  });\n  var direction = delta.map(function (v) {\n    return alpha * v;\n  });\n  var distance = calculateDistance(movement);\n  return {\n    velocities: velocities,\n    velocity: velocity,\n    distance: distance,\n    direction: direction\n  };\n}\n/**\r\n * Because IE doesn't support `Math.sign` function, so we use the polyfill version of the function.\r\n * This polyfill function is suggested by Mozilla:\r\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign#Polyfill\r\n * @param x target number\r\n */\n\nfunction sign(x) {\n  if (Math.sign) return Math.sign(x);\n  return Number(x > 0) - Number(x < 0) || +x;\n}\n\nfunction minMax(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n} // Based on @aholachek ;)\n// https://twitter.com/chpwn/status/285540192096497664\n// iOS constant = 0.55\n// https://medium.com/@nathangitter/building-fluid-interfaces-ios-swift-9732bb934bf5\n\n\nfunction rubberband2(distance, constant) {\n  // default constant from the article is 0.7\n  return Math.pow(distance, constant * 5);\n}\n\nfunction rubberband(distance, dimension, constant) {\n  if (dimension === 0 || Math.abs(dimension) === Infinity) return rubberband2(distance, constant);\n  return distance * dimension * constant / (dimension + constant * distance);\n}\n\nfunction rubberbandIfOutOfBounds(position, min, max, constant) {\n  if (constant === void 0) {\n    constant = 0.15;\n  }\n\n  if (constant === 0) return minMax(position, min, max);\n  if (position < min) return -rubberband(min - position, max - min, constant) + min;\n  if (position > max) return +rubberband(position - max, max - min, constant) + max;\n  return position;\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  it = o[Symbol.iterator]();\n  return it.next.bind(it);\n}\n\nfunction noop() {}\n/**\r\n * TODO Beware that only optimized cases are covered in tests =)\r\n * TODO Need to cover general case as well\r\n *\r\n * @param fns\r\n */\n\nfunction chainFns() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    var result;\n\n    for (var _iterator = _createForOfIteratorHelperLoose(fns), _step; !(_step = _iterator()).done;) {\n      var fn = _step.value;\n      result = fn.apply(this, arguments) || result;\n    }\n\n    return result;\n  };\n}\n/**\r\n * Expects a simple value or 2D vector (an array with 2 elements) and\r\n * always returns 2D vector. If simple value is passed, returns a\r\n * vector with this value as both coordinates.\r\n *\r\n * @param value\r\n */\n\nfunction ensureVector(value, fallback) {\n  if (value === undefined) {\n    if (fallback === undefined) {\n      throw new Error('Must define fallback value if undefined is expected');\n    }\n\n    value = fallback;\n  }\n\n  if (Array.isArray(value)) return value;\n  return [value, value];\n}\n/**\r\n * Helper for defining a default value\r\n *\r\n * @param value\r\n * @param fallback\r\n */\n\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n/**\r\n * Resolves getters (functions) by calling them\r\n * If simple value is given it just passes through\r\n *\r\n * @param v\r\n */\n\nfunction valueFn(v) {\n  if (typeof v === 'function') {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    // @ts-ignore\n    return v.apply(void 0, args);\n  } else {\n    return v;\n  }\n}\n\nfunction resolveWith(config, resolvers) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var result = {};\n\n  for (var _i = 0, _Object$entries = Object.entries(resolvers); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _Object$entries[_i],\n        key = _Object$entries$_i[0],\n        resolver = _Object$entries$_i[1];\n\n    switch (typeof resolver) {\n      case 'function':\n        result[key] = resolver.call(result, config[key], key, config);\n        break;\n\n      case 'object':\n        result[key] = resolveWith(config[key], resolver);\n        break;\n\n      case 'boolean':\n        if (resolver) result[key] = config[key];\n        break;\n    }\n  }\n\n  return result;\n}\n\n/**\r\n * Whether the browser supports GestureEvent (ie Safari)\r\n * @returns true if the browser supports gesture event\r\n */\nfunction supportsGestureEvents() {\n  try {\n    // TODO [TS] possibly find GestureEvent definitions?\n    // @ts-ignore: no type definitions for webkit GestureEvents\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\nfunction supportsTouchEvents() {\n  return typeof window !== 'undefined' && 'ontouchstart' in window;\n}\nfunction supportsPointerEvents() {\n  return typeof window !== 'undefined' && 'onpointerdown' in window;\n}\n\nfunction getEventTouches(event) {\n  if ('pointerId' in event) return null;\n  return event.type === 'touchend' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getTouchIds(event) {\n  return Array.from(getEventTouches(event)).map(function (t) {\n    return t.identifier;\n  });\n}\nfunction getGenericEventData(event) {\n  var buttons = 'buttons' in event ? event.buttons : 0;\n  var shiftKey = event.shiftKey,\n      altKey = event.altKey,\n      metaKey = event.metaKey,\n      ctrlKey = event.ctrlKey; // TODO check if this might create some overrides?\n\n  return {\n    buttons: buttons,\n    shiftKey: shiftKey,\n    altKey: altKey,\n    metaKey: metaKey,\n    ctrlKey: ctrlKey\n  };\n}\n\nvar identity = function identity(xy) {\n  return xy;\n};\n/**\r\n * Gets pointer event values.\r\n * @param event\r\n * @returns pointer event values\r\n */\n\n\nfunction getPointerEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n\n  var touchEvents = getEventTouches(event);\n\n  var _ref = touchEvents ? touchEvents[0] : event,\n      clientX = _ref.clientX,\n      clientY = _ref.clientY;\n\n  return transform([clientX, clientY]);\n}\n/**\r\n * Gets two touches event data\r\n * @param event\r\n * @returns two touches event data\r\n */\n\nfunction getTwoTouchesEventValues(event, pointerIds, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n\n  var _Array$from$filter = Array.from(event.touches).filter(function (t) {\n    return pointerIds.includes(t.identifier);\n  }),\n      A = _Array$from$filter[0],\n      B = _Array$from$filter[1];\n\n  if (!A || !B) throw Error(\"The event doesn't have two pointers matching the pointerIds\");\n  var dx = B.clientX - A.clientX;\n  var dy = B.clientY - A.clientY;\n  var cx = (B.clientX + A.clientX) / 2;\n  var cy = (B.clientY + A.clientY) / 2; // const e: any = 'nativeEvent' in event ? event.nativeEvent : event\n\n  var distance = Math.hypot(dx, dy); // FIXME rotation has inconsistant values so we're not using it atm\n  // const angle = (e.rotation as number) ?? -(Math.atan2(dx, dy) * 180) / Math.PI\n\n  var angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  var values = transform([distance, angle]);\n  var origin = transform([cx, cy]);\n  return {\n    values: values,\n    origin: origin\n  };\n}\n/**\r\n * Gets scroll event values\r\n * @param event\r\n * @returns scroll event values\r\n */\n\nfunction getScrollEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n\n  // If the currentTarget is the window then we return the scrollX/Y position.\n  // If not (ie the currentTarget is a DOM element), then we return scrollLeft/Top\n  var _event$currentTarget = event.currentTarget,\n      scrollX = _event$currentTarget.scrollX,\n      scrollY = _event$currentTarget.scrollY,\n      scrollLeft = _event$currentTarget.scrollLeft,\n      scrollTop = _event$currentTarget.scrollTop;\n  return transform([scrollX || scrollLeft || 0, scrollY || scrollTop || 0]);\n} // wheel delta defaults from https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\n\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n/**\r\n * Gets wheel event values.\r\n * @param event\r\n * @returns wheel event values\r\n */\n\nfunction getWheelEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n\n  var deltaX = event.deltaX,\n      deltaY = event.deltaY,\n      deltaMode = event.deltaMode; // normalize wheel values, especially for Firefox\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return transform([deltaX, deltaY]);\n}\n/**\r\n * Gets webkit gesture event values.\r\n * @param event\r\n * @returns webkit gesture event values\r\n */\n\nfunction getWebkitGestureEventValues(event, transform) {\n  if (transform === void 0) {\n    transform = identity;\n  }\n\n  return transform([event.scale, event.rotation]);\n}\n\nvar DEFAULT_DRAG_DELAY = 180;\nvar DEFAULT_RUBBERBAND = 0.15;\nvar DEFAULT_SWIPE_VELOCITY = 0.5;\nvar DEFAULT_SWIPE_DISTANCE = 50;\nvar DEFAULT_SWIPE_DURATION = 250;\nvar InternalGestureOptionsNormalizers = {\n  threshold: function threshold(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n\n    return ensureVector(value);\n  },\n  rubberband: function rubberband(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n\n    switch (value) {\n      case true:\n        return ensureVector(DEFAULT_RUBBERBAND);\n\n      case false:\n        return ensureVector(0);\n\n      default:\n        return ensureVector(value);\n    }\n  },\n  enabled: function enabled(value) {\n    if (value === void 0) {\n      value = true;\n    }\n\n    return value;\n  },\n  triggerAllEvents: function triggerAllEvents(value) {\n    if (value === void 0) {\n      value = false;\n    }\n\n    return value;\n  },\n  initial: function initial(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n\n    if (typeof value === 'function') return value;\n    return ensureVector(value);\n  },\n  transform: true\n};\n\nvar InternalCoordinatesOptionsNormalizers = /*#__PURE__*/_extends({}, InternalGestureOptionsNormalizers, {\n  axis: true,\n  lockDirection: function lockDirection(value) {\n    if (value === void 0) {\n      value = false;\n    }\n\n    return value;\n  },\n  bounds: function bounds(value) {\n    if (value === void 0) {\n      value = {};\n    }\n\n    if (typeof value === 'function') return function (state) {\n      return InternalCoordinatesOptionsNormalizers.bounds(value(state));\n    };\n    var _value2 = value,\n        _value2$left = _value2.left,\n        left = _value2$left === void 0 ? -Infinity : _value2$left,\n        _value2$right = _value2.right,\n        right = _value2$right === void 0 ? Infinity : _value2$right,\n        _value2$top = _value2.top,\n        top = _value2$top === void 0 ? -Infinity : _value2$top,\n        _value2$bottom = _value2.bottom,\n        bottom = _value2$bottom === void 0 ? Infinity : _value2$bottom;\n    return [[left, right], [top, bottom]];\n  }\n});\n\nvar isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\nvar InternalGenericOptionsNormalizers = {\n  enabled: function enabled(value) {\n    if (value === void 0) {\n      value = true;\n    }\n\n    return value;\n  },\n  domTarget: true,\n  window: /*#__PURE__*/function (_window) {\n    function window(_x) {\n      return _window.apply(this, arguments);\n    }\n\n    window.toString = function () {\n      return _window.toString();\n    };\n\n    return window;\n  }(function (value) {\n    if (value === void 0) {\n      value = isBrowser ? window : undefined;\n    }\n\n    return value;\n  }),\n  eventOptions: function eventOptions(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        _ref$passive = _ref.passive,\n        passive = _ref$passive === void 0 ? true : _ref$passive,\n        _ref$capture = _ref.capture,\n        capture = _ref$capture === void 0 ? false : _ref$capture;\n\n    return {\n      passive: passive,\n      capture: capture\n    };\n  },\n  transform: true\n};\n\nvar InternalDistanceAngleOptionsNormalizers = /*#__PURE__*/_extends({}, InternalGestureOptionsNormalizers, {\n  bounds: function bounds(_value, _key, _ref2) {\n    var _ref2$distanceBounds = _ref2.distanceBounds,\n        distanceBounds = _ref2$distanceBounds === void 0 ? {} : _ref2$distanceBounds,\n        _ref2$angleBounds = _ref2.angleBounds,\n        angleBounds = _ref2$angleBounds === void 0 ? {} : _ref2$angleBounds;\n\n    var _distanceBounds = function _distanceBounds(state) {\n      var D = assignDefault(valueFn(distanceBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    var _angleBounds = function _angleBounds(state) {\n      var A = assignDefault(valueFn(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof distanceBounds !== 'function' && typeof angleBounds !== 'function') return [_distanceBounds(), _angleBounds()];\n    return function (state) {\n      return [_distanceBounds(state), _angleBounds(state)];\n    };\n  }\n});\n\nvar InternalDragOptionsNormalizers = /*#__PURE__*/_extends({}, InternalCoordinatesOptionsNormalizers, {\n  useTouch: function useTouch(value) {\n    if (value === void 0) {\n      value = false;\n    }\n\n    var supportsTouch = supportsTouchEvents();\n    var supportsPointer = supportsPointerEvents();\n    if (value && supportsTouch) return true;\n    if (supportsTouch && !supportsPointer) return true;\n    return false;\n  },\n  experimental_preventWindowScrollY: function experimental_preventWindowScrollY(value) {\n    if (value === void 0) {\n      value = false;\n    }\n\n    return value;\n  },\n  threshold: function threshold(v, _k, _ref3) {\n    var _ref3$filterTaps = _ref3.filterTaps,\n        filterTaps = _ref3$filterTaps === void 0 ? false : _ref3$filterTaps,\n        _ref3$lockDirection = _ref3.lockDirection,\n        lockDirection = _ref3$lockDirection === void 0 ? false : _ref3$lockDirection,\n        _ref3$axis = _ref3.axis,\n        axis = _ref3$axis === void 0 ? undefined : _ref3$axis;\n    var A = ensureVector(v, filterTaps ? 3 : lockDirection ? 1 : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    return A;\n  },\n  swipeVelocity: function swipeVelocity(v) {\n    if (v === void 0) {\n      v = DEFAULT_SWIPE_VELOCITY;\n    }\n\n    return ensureVector(v);\n  },\n  swipeDistance: function swipeDistance(v) {\n    if (v === void 0) {\n      v = DEFAULT_SWIPE_DISTANCE;\n    }\n\n    return ensureVector(v);\n  },\n  swipeDuration: function swipeDuration(value) {\n    if (value === void 0) {\n      value = DEFAULT_SWIPE_DURATION;\n    }\n\n    return value;\n  },\n  delay: function delay(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  }\n});\n\nfunction getInternalGenericOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  // TODO warn when passive is set to true and domTarget is undefined\n  return resolveWith(config, InternalGenericOptionsNormalizers);\n}\nfunction getInternalCoordinatesOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  return resolveWith(config, InternalCoordinatesOptionsNormalizers);\n}\nfunction getInternalDistanceAngleOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  return resolveWith(config, InternalDistanceAngleOptionsNormalizers);\n}\nfunction getInternalDragOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  return resolveWith(config, InternalDragOptionsNormalizers);\n}\n\nfunction _buildMoveConfig(_ref) {\n  var domTarget = _ref.domTarget,\n      eventOptions = _ref.eventOptions,\n      window = _ref.window,\n      enabled = _ref.enabled,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.move = getInternalCoordinatesOptions(rest);\n  return opts;\n}\nfunction _buildHoverConfig(_ref2) {\n  var domTarget = _ref2.domTarget,\n      eventOptions = _ref2.eventOptions,\n      window = _ref2.window,\n      enabled = _ref2.enabled,\n      rest = _objectWithoutPropertiesLoose(_ref2, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.hover = _extends({\n    enabled: true\n  }, rest);\n  return opts;\n}\nfunction _buildDragConfig(_ref3) {\n  var domTarget = _ref3.domTarget,\n      eventOptions = _ref3.eventOptions,\n      window = _ref3.window,\n      enabled = _ref3.enabled,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.drag = getInternalDragOptions(rest);\n  return opts;\n}\nfunction _buildPinchConfig(_ref4) {\n  var domTarget = _ref4.domTarget,\n      eventOptions = _ref4.eventOptions,\n      window = _ref4.window,\n      enabled = _ref4.enabled,\n      rest = _objectWithoutPropertiesLoose(_ref4, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.pinch = getInternalDistanceAngleOptions(rest);\n  return opts;\n}\nfunction _buildScrollConfig(_ref5) {\n  var domTarget = _ref5.domTarget,\n      eventOptions = _ref5.eventOptions,\n      window = _ref5.window,\n      enabled = _ref5.enabled,\n      rest = _objectWithoutPropertiesLoose(_ref5, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.scroll = getInternalCoordinatesOptions(rest);\n  return opts;\n}\nfunction _buildWheelConfig(_ref6) {\n  var domTarget = _ref6.domTarget,\n      eventOptions = _ref6.eventOptions,\n      window = _ref6.window,\n      enabled = _ref6.enabled,\n      rest = _objectWithoutPropertiesLoose(_ref6, [\"domTarget\", \"eventOptions\", \"window\", \"enabled\"]);\n\n  var opts = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window,\n    enabled: enabled\n  });\n  opts.wheel = getInternalCoordinatesOptions(rest);\n  return opts;\n}\nfunction buildComplexConfig(config, actions) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  if (actions === void 0) {\n    actions = new Set();\n  }\n\n  var _config = config,\n      drag = _config.drag,\n      wheel = _config.wheel,\n      move = _config.move,\n      scroll = _config.scroll,\n      pinch = _config.pinch,\n      hover = _config.hover,\n      eventOptions = _config.eventOptions,\n      window = _config.window,\n      transform = _config.transform,\n      domTarget = _config.domTarget,\n      enabled = _config.enabled;\n  var mergedConfig = getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    transform: transform,\n    window: window,\n    enabled: enabled\n  });\n  if (actions.has('onDrag')) mergedConfig.drag = getInternalDragOptions(drag);\n  if (actions.has('onWheel')) mergedConfig.wheel = getInternalCoordinatesOptions(wheel);\n  if (actions.has('onScroll')) mergedConfig.scroll = getInternalCoordinatesOptions(scroll);\n  if (actions.has('onMove')) mergedConfig.move = getInternalCoordinatesOptions(move);\n  if (actions.has('onPinch')) mergedConfig.pinch = getInternalDistanceAngleOptions(pinch);\n  if (actions.has('onHover')) mergedConfig.hover = _extends({\n    enabled: true\n  }, hover);\n  return mergedConfig;\n}\n\nfunction getInitial(mixed) {\n  return _extends({\n    _active: false,\n    _blocked: false,\n    _intentional: [false, false],\n    _movement: [0, 0],\n    _initial: [0, 0],\n    _bounds: [[-Infinity, Infinity], [-Infinity, Infinity]],\n    _threshold: [0, 0],\n    _lastEventType: undefined,\n    _dragStarted: false,\n    _dragPreventScroll: false,\n    _dragIsTap: true,\n    _dragDelayed: false,\n    event: undefined,\n    intentional: false,\n    values: [0, 0],\n    velocities: [0, 0],\n    delta: [0, 0],\n    movement: [0, 0],\n    offset: [0, 0],\n    lastOffset: [0, 0],\n    direction: [0, 0],\n    initial: [0, 0],\n    previous: [0, 0],\n    first: false,\n    last: false,\n    active: false,\n    timeStamp: 0,\n    startTime: 0,\n    elapsedTime: 0,\n    cancel: noop,\n    canceled: false,\n    memo: undefined,\n    args: undefined\n  }, mixed);\n}\n\nfunction getInitialState() {\n  var shared = {\n    hovering: false,\n    scrolling: false,\n    wheeling: false,\n    dragging: false,\n    moving: false,\n    pinching: false,\n    touches: 0,\n    buttons: 0,\n    down: false,\n    shiftKey: false,\n    altKey: false,\n    metaKey: false,\n    ctrlKey: false,\n    locked: false\n  };\n  var drag = getInitial({\n    _pointerId: undefined,\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0,\n    tap: false,\n    swipe: [0, 0]\n  });\n  var pinch = getInitial({\n    // @ts-expect-error when used _pointerIds we can assert its type will be [number, number]\n    _pointerIds: [],\n    da: [0, 0],\n    vdva: [0, 0],\n    // @ts-expect-error origin can never be passed as undefined in userland\n    origin: undefined,\n    turns: 0\n  });\n  var wheel = getInitial({\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0\n  });\n  var move = getInitial({\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0\n  });\n  var scroll = getInitial({\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0\n  });\n  return {\n    shared: shared,\n    drag: drag,\n    pinch: pinch,\n    wheel: wheel,\n    move: move,\n    scroll: scroll\n  };\n}\n\nvar RecognizersMap = /*#__PURE__*/new Map();\n\nvar identity$1 = function identity(xy) {\n  return xy;\n};\n/**\r\n * @private\r\n * Recognizer abstract class.\r\n */\n\n\nvar Recognizer = /*#__PURE__*/function () {\n  /**\r\n   * Creates an instance of a gesture recognizer.\r\n   * @param stateKey drag, move, pinch, etc.\r\n   * @param controller the controller attached to the gesture\r\n   * @param [args] the args that should be passed to the gesture handler\r\n   */\n  function Recognizer(controller, args) {\n    var _this = this;\n\n    if (args === void 0) {\n      args = [];\n    }\n\n    this.controller = controller;\n    this.args = args;\n    this.debounced = true; // Convenience method to set a timeout for a given gesture\n\n    this.setTimeout = function (callback, ms) {\n      var _window;\n\n      if (ms === void 0) {\n        ms = 140;\n      }\n\n      clearTimeout(_this.controller.timeouts[_this.stateKey]);\n\n      for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      _this.controller.timeouts[_this.stateKey] = (_window = window).setTimeout.apply(_window, [callback, ms].concat(args));\n    }; // Convenience method to clear a timeout for a given gesture\n\n\n    this.clearTimeout = function () {\n      clearTimeout(_this.controller.timeouts[_this.stateKey]);\n    };\n    /**\r\n     * Fires the gesture handler\r\n     */\n\n\n    this.fireGestureHandler = function (forceFlag) {\n      if (forceFlag === void 0) {\n        forceFlag = false;\n      }\n\n      /**\r\n       * If the gesture has been blocked (this can happen when the gesture has started in an unwanted direction),\r\n       * clean everything and don't do anything.\r\n       */\n      if (_this.state._blocked) {\n        // we need debounced gestures to end by themselves\n        if (!_this.debounced) {\n          _this.state._active = false;\n\n          _this.clean();\n        }\n\n        return null;\n      } // If the gesture has no intentional dimension, don't fire the handler.\n\n\n      if (!forceFlag && !_this.state.intentional && !_this.config.triggerAllEvents) return null;\n\n      if (_this.state.intentional) {\n        var prev_active = _this.state.active;\n        var next_active = _this.state._active;\n        _this.state.active = next_active;\n        _this.state.first = next_active && !prev_active;\n        _this.state.last = prev_active && !next_active;\n        _this.controller.state.shared[_this.ingKey] = next_active; // Sets dragging, pinching, etc. to the gesture active state\n      }\n\n      var touches = _this.controller.pointerIds.size || _this.controller.touchIds.size;\n      var down = _this.controller.state.shared.buttons > 0 || touches > 0;\n\n      var state = _extends({}, _this.controller.state.shared, _this.state, _this.mapStateValues(_this.state), {\n        locked: !!document.pointerLockElement,\n        touches: touches,\n        down: down\n      }); // @ts-expect-error\n\n\n      var newMemo = _this.handler(state); // Sets memo to the returned value of the handler (unless it's not undefined)\n\n\n      _this.state.memo = newMemo !== void 0 ? newMemo : _this.state.memo;\n      return state;\n    };\n\n    this.controller = controller;\n    this.args = args;\n  } // Returns the gesture config\n\n\n  var _proto = Recognizer.prototype;\n\n  // Convenience method to update the shared state\n  _proto.updateSharedState = function updateSharedState(sharedState) {\n    Object.assign(this.controller.state.shared, sharedState);\n  } // Convenience method to update the gesture state\n  ;\n\n  _proto.updateGestureState = function updateGestureState(gestureState) {\n    Object.assign(this.state, gestureState);\n  }\n  /**\r\n   * Returns state properties depending on the movement and state.\r\n   *\r\n   * Should be overriden for custom behavior, doesn't do anything in the implementation\r\n   * below.\r\n   */\n  ;\n\n  _proto.checkIntentionality = function checkIntentionality(_intentional, _movement) {\n    return {\n      _intentional: _intentional,\n      _blocked: false\n    };\n  }\n  /**\r\n   * Returns basic movement properties for the gesture based on the next values and current state.\r\n   */\n  ;\n\n  _proto.getMovement = function getMovement(values) {\n    var rubberband = this.config.rubberband;\n    var _this$state = this.state,\n        _bounds = _this$state._bounds,\n        _initial = _this$state._initial,\n        _active = _this$state._active,\n        wasIntentional = _this$state._intentional,\n        lastOffset = _this$state.lastOffset,\n        prevMovement = _this$state.movement,\n        _T = _this$state._threshold;\n    var M = this.getInternalMovement(values, this.state);\n    var i0 = wasIntentional[0] === false ? getIntentionalDisplacement(M[0], _T[0]) : wasIntentional[0];\n    var i1 = wasIntentional[1] === false ? getIntentionalDisplacement(M[1], _T[1]) : wasIntentional[1]; // Get gesture specific state properties based on intentionality and movement.\n\n    var intentionalityCheck = this.checkIntentionality([i0, i1], M);\n\n    if (intentionalityCheck._blocked) {\n      return _extends({}, intentionalityCheck, {\n        _movement: M,\n        delta: [0, 0]\n      });\n    }\n\n    var _intentional = intentionalityCheck._intentional;\n    var _movement = M;\n    /**\r\n     * The movement sent to the handler has 0 in its dimensions when intentionality is false.\r\n     * It is calculated from the actual movement minus the threshold.\r\n     */\n\n    var movement = [_intentional[0] !== false ? M[0] - _intentional[0] : 0, _intentional[1] !== false ? M[1] - _intentional[1] : 0];\n    var offset = addV(movement, lastOffset);\n    /**\r\n     * Rubberband should be 0 when the gesture is no longer active, so that movement\r\n     * and offset can return within their bounds.\r\n     */\n\n    var _rubberband = _active ? rubberband : [0, 0];\n\n    movement = computeRubberband(_bounds, addV(movement, _initial), _rubberband);\n    return _extends({}, intentionalityCheck, {\n      intentional: _intentional[0] !== false || _intentional[1] !== false,\n      _initial: _initial,\n      _movement: _movement,\n      movement: movement,\n      values: values,\n      offset: computeRubberband(_bounds, offset, _rubberband),\n      delta: subV(movement, prevMovement)\n    });\n  } // Cleans the gesture. Can be overriden by gestures.\n  ;\n\n  _proto.clean = function clean() {\n    this.clearTimeout();\n  };\n\n  _createClass(Recognizer, [{\n    key: \"config\",\n    get: function get() {\n      return this.controller.config[this.stateKey];\n    } // Is the gesture enabled\n\n  }, {\n    key: \"enabled\",\n    get: function get() {\n      return this.controller.config.enabled && this.config.enabled;\n    } // Returns the controller state for a given gesture\n\n  }, {\n    key: \"state\",\n    get: function get() {\n      return this.controller.state[this.stateKey];\n    } // Returns the gesture handler\n\n  }, {\n    key: \"handler\",\n    get: function get() {\n      return this.controller.handlers[this.stateKey];\n    }\n  }, {\n    key: \"transform\",\n    get: function get() {\n      return this.config.transform || this.controller.config.transform || identity$1;\n    }\n  }]);\n\n  return Recognizer;\n}(); //--------------------------------------------\n\nfunction getIntentionalDisplacement(movement, threshold) {\n  if (Math.abs(movement) >= threshold) {\n    return sign(movement) * threshold;\n  } else {\n    return false;\n  }\n}\n\nfunction computeRubberband(bounds, _ref, _ref2) {\n  var Vx = _ref[0],\n      Vy = _ref[1];\n  var Rx = _ref2[0],\n      Ry = _ref2[1];\n  var _bounds$ = bounds[0],\n      X1 = _bounds$[0],\n      X2 = _bounds$[1],\n      _bounds$2 = bounds[1],\n      Y1 = _bounds$2[0],\n      Y2 = _bounds$2[1];\n  return [rubberbandIfOutOfBounds(Vx, X1, X2, Rx), rubberbandIfOutOfBounds(Vy, Y1, Y2, Ry)];\n}\n/**\r\n * Returns a generic, common payload for all gestures from an event.\r\n */\n\n\nfunction getGenericPayload(_ref3, event, isStartEvent) {\n  var state = _ref3.state;\n  var timeStamp = event.timeStamp,\n      _lastEventType = event.type;\n  var previous = state.values;\n  var elapsedTime = isStartEvent ? 0 : timeStamp - state.startTime;\n  return {\n    _lastEventType: _lastEventType,\n    event: event,\n    timeStamp: timeStamp,\n    elapsedTime: elapsedTime,\n    previous: previous\n  };\n}\n/**\r\n * Returns the reinitialized start state for the gesture.\r\n * Should be common to all gestures.\r\n */\n\nfunction getStartGestureState(_ref4, values, event, initial) {\n  var state = _ref4.state,\n      config = _ref4.config,\n      stateKey = _ref4.stateKey,\n      args = _ref4.args,\n      transform = _ref4.transform;\n  var offset = state.offset;\n  var startTime = event.timeStamp;\n  var initialFn = config.initial,\n      bounds = config.bounds,\n      threshold = config.threshold; // the _threshold is the difference between a [0,0] offset converted to\n  // its new space coordinates\n\n  var _threshold = subV(transform(threshold), transform([0, 0])).map(Math.abs);\n\n  var _state = _extends({}, getInitialState()[stateKey], {\n    _active: true,\n    args: args,\n    values: values,\n    initial: initial != null ? initial : values,\n    _threshold: _threshold,\n    offset: offset,\n    lastOffset: offset,\n    startTime: startTime\n  });\n\n  return _extends({}, _state, {\n    _initial: valueFn(initialFn, _state),\n    _bounds: valueFn(bounds, _state)\n  });\n}\n\n/**\r\n * The controller will keep track of the state for all gestures and also keep\r\n * track of timeouts, and window listeners.\r\n */\n\nvar Controller = function Controller(classes) {\n  var _this = this;\n\n  this.classes = classes;\n  this.pointerIds = new Set(); // register Pointer Events pointerIds\n\n  this.touchIds = new Set(); // register Touch Events identifiers\n\n  this.supportsTouchEvents = supportsTouchEvents();\n  this.supportsGestureEvents = supportsGestureEvents();\n\n  this.bind = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var bindings = {};\n\n    for (var _iterator = _createForOfIteratorHelperLoose(_this.classes), _step; !(_step = _iterator()).done;) {\n      var RecognizerClass = _step.value;\n      new RecognizerClass(_this, args).addBindings(bindings);\n    } // // we also add event bindings for native handlers\n\n\n    var _loop = function _loop(eventKey) {\n      addBindings(bindings, eventKey, function (event) {\n        return _this.nativeRefs[eventKey](_extends({}, _this.state.shared, {\n          event: event,\n          args: args\n        }));\n      });\n    };\n\n    for (var eventKey in _this.nativeRefs) {\n      _loop(eventKey);\n    }\n\n    if (_this.config.domTarget) {\n      // If config.domTarget is set we add event listeners to it and return the clean function.\n      return updateDomListeners(_this, bindings);\n    } else {\n      // If not, we return an object that contains gesture handlers mapped to react handler event keys.\n      return getPropsListener(_this, bindings);\n    }\n  };\n\n  this.effect = function () {\n    if (_this.config.domTarget) _this.bind();\n    return _this.clean;\n  };\n  /**\r\n   * Function ran on component unmount: cleans timeouts and removes dom listeners set by the bind function.\r\n   */\n\n\n  this.clean = function () {\n    var domTarget = getDomTargetFromConfig(_this.config);\n    var eventOptions = _this.config.eventOptions;\n    if (domTarget) removeListeners(domTarget, takeAll(_this.domListeners), eventOptions);\n    Object.values(_this.timeouts).forEach(clearTimeout);\n    clearAllWindowListeners(_this);\n  };\n\n  this.classes = classes;\n  this.state = getInitialState();\n  this.timeouts = {};\n  this.domListeners = [];\n  this.windowListeners = {};\n};\nfunction addEventIds(controller, event) {\n  if ('pointerId' in event) {\n    controller.pointerIds.add(event.pointerId);\n  } else {\n    controller.touchIds = new Set(getTouchIds(event));\n  }\n}\nfunction removeEventIds(controller, event) {\n  if ('pointerId' in event) {\n    controller.pointerIds[\"delete\"](event.pointerId);\n  } else {\n    getTouchIds(event).forEach(function (id) {\n      return controller.touchIds[\"delete\"](id);\n    });\n  }\n}\nfunction clearAllWindowListeners(controller) {\n  var _controller$config = controller.config,\n      el = _controller$config.window,\n      eventOptions = _controller$config.eventOptions,\n      windowListeners = controller.windowListeners;\n  if (!el) return;\n\n  for (var stateKey in windowListeners) {\n    var handlers = windowListeners[stateKey];\n    removeListeners(el, handlers, eventOptions);\n  }\n\n  controller.windowListeners = {};\n}\nfunction clearWindowListeners(_ref, stateKey, options) {\n  var config = _ref.config,\n      windowListeners = _ref.windowListeners;\n\n  if (options === void 0) {\n    options = config.eventOptions;\n  }\n\n  if (!config.window) return;\n  removeListeners(config.window, windowListeners[stateKey], options);\n  delete windowListeners[stateKey];\n}\nfunction updateWindowListeners(_ref2, stateKey, listeners, options) {\n  var config = _ref2.config,\n      windowListeners = _ref2.windowListeners;\n\n  if (listeners === void 0) {\n    listeners = [];\n  }\n\n  if (options === void 0) {\n    options = config.eventOptions;\n  }\n\n  if (!config.window) return;\n  removeListeners(config.window, windowListeners[stateKey], options);\n  addListeners(config.window, windowListeners[stateKey] = listeners, options);\n}\n\nfunction updateDomListeners(_ref3, bindings) {\n  var config = _ref3.config,\n      domListeners = _ref3.domListeners;\n  var domTarget = getDomTargetFromConfig(config);\n  if (!domTarget) throw new Error('domTarget must be defined');\n  var eventOptions = config.eventOptions;\n  removeListeners(domTarget, takeAll(domListeners), eventOptions);\n\n  for (var _i = 0, _Object$entries = Object.entries(bindings); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _Object$entries[_i],\n        key = _Object$entries$_i[0],\n        fns = _Object$entries$_i[1];\n    var name = key.slice(2).toLowerCase();\n    domListeners.push([name, chainFns.apply(void 0, fns)]);\n  }\n\n  addListeners(domTarget, domListeners, eventOptions);\n}\n\nfunction getPropsListener(_ref4, bindings) {\n  var config = _ref4.config;\n  var props = {};\n  var captureString = config.eventOptions.capture ? 'Capture' : '';\n\n  for (var _i2 = 0, _Object$entries2 = Object.entries(bindings); _i2 < _Object$entries2.length; _i2++) {\n    var _Object$entries2$_i = _Object$entries2[_i2],\n        event = _Object$entries2$_i[0],\n        fns = _Object$entries2$_i[1];\n    var fnsArray = Array.isArray(fns) ? fns : [fns];\n    var key = event + captureString;\n    props[key] = chainFns.apply(void 0, fnsArray);\n  }\n\n  return props;\n}\n\nfunction takeAll(array) {\n  if (array === void 0) {\n    array = [];\n  }\n\n  return array.splice(0, array.length);\n}\n\nfunction getDomTargetFromConfig(_ref5) {\n  var domTarget = _ref5.domTarget;\n  return domTarget && 'current' in domTarget ? domTarget.current : domTarget;\n}\n/**\r\n * bindings is an object which keys match ReactEventHandlerKeys.\r\n * Since a recognizer might want to bind a handler function to an event key already used by a previously\r\n * added recognizer, we need to make sure that each event key is an array of all the functions mapped for\r\n * that key.\r\n */\n\n\nfunction addBindings(bindings, name, fn) {\n  if (!bindings[name]) bindings[name] = [];\n  bindings[name].push(fn);\n}\n\nfunction addListeners(el, listeners, options) {\n  if (listeners === void 0) {\n    listeners = [];\n  }\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  for (var _iterator2 = _createForOfIteratorHelperLoose(listeners), _step2; !(_step2 = _iterator2()).done;) {\n    var _step2$value = _step2.value,\n        eventName = _step2$value[0],\n        eventHandler = _step2$value[1];\n    el.addEventListener(eventName, eventHandler, options);\n  }\n}\n\nfunction removeListeners(el, listeners, options) {\n  if (listeners === void 0) {\n    listeners = [];\n  }\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  for (var _iterator3 = _createForOfIteratorHelperLoose(listeners), _step3; !(_step3 = _iterator3()).done;) {\n    var _step3$value = _step3.value,\n        eventName = _step3$value[0],\n        eventHandler = _step3$value[1];\n    el.removeEventListener(eventName, eventHandler, options);\n  }\n}\n\n/* eslint-disable react-hooks/exhaustive-deps */\n/**\r\n * Utility hook called by all gesture hooks and that will be responsible for the internals.\r\n *\r\n * @param handlers\r\n * @param classes\r\n * @param config\r\n * @param nativeHandlers - native handlers such as onClick, onMouseDown, etc.\r\n */\n\nfunction useRecognizers(handlers, config, nativeHandlers) {\n  if (nativeHandlers === void 0) {\n    nativeHandlers = {};\n  }\n\n  var classes = resolveClasses(handlers);\n  var controller = React.useMemo(function () {\n    return new Controller(classes);\n  }, []);\n  controller.config = config;\n  controller.handlers = handlers;\n  controller.nativeRefs = nativeHandlers;\n  React.useEffect(controller.effect, []); // @ts-ignore\n\n  if (controller.config.domTarget) return deprecationNoticeForDomTarget; // @ts-ignore\n\n  return controller.bind;\n}\n\nfunction deprecationNoticeForDomTarget() {\n  if (process.env.NODE_ENV === 'development') {\n    // eslint-disable-next-line no-console\n    console.warn(\"Deprecation notice: When the `domTarget` option is specified, you don't need to write `useEffect(bind, [bind])` anymore: event binding is now made handled internally to this lib.\\n\\nNext version won't return anything when `domTarget` is provided, therefore your code will break if you try to call `useEffect`.\");\n  }\n}\n\nfunction resolveClasses(internalHandlers) {\n  var classes = new Set();\n  if (internalHandlers.drag) classes.add(RecognizersMap.get('drag'));\n  if (internalHandlers.wheel) classes.add(RecognizersMap.get('wheel'));\n  if (internalHandlers.scroll) classes.add(RecognizersMap.get('scroll'));\n  if (internalHandlers.move) classes.add(RecognizersMap.get('move'));\n  if (internalHandlers.pinch) classes.add(RecognizersMap.get('pinch'));\n  if (internalHandlers.hover) classes.add(RecognizersMap.get('hover'));\n  return classes;\n}\n\n/**\r\n * @private\r\n * Abstract class for coordinates-based gesture recongizers\r\n */\n\nvar CoordinatesRecognizer = /*#__PURE__*/function (_Recognizer) {\n  _inheritsLoose(CoordinatesRecognizer, _Recognizer);\n\n  function CoordinatesRecognizer() {\n    return _Recognizer.apply(this, arguments) || this;\n  }\n\n  var _proto = CoordinatesRecognizer.prototype;\n\n  /**\r\n   * Returns the real movement (without taking intentionality into account)\r\n   */\n  _proto.getInternalMovement = function getInternalMovement(values, state) {\n    return subV(values, state.initial);\n  }\n  /**\r\n   * In coordinates-based gesture, this function will detect the first intentional axis,\r\n   * lock the gesture axis if lockDirection is specified in the config, block the gesture\r\n   * if the first intentional axis doesn't match the specified axis in config.\r\n   */\n  ;\n\n  _proto.checkIntentionality = function checkIntentionality(_intentional, _movement) {\n    if (_intentional[0] === false && _intentional[1] === false) {\n      return {\n        _intentional: _intentional,\n        axis: this.state.axis\n      };\n    }\n\n    var _movement$map = _movement.map(Math.abs),\n        absX = _movement$map[0],\n        absY = _movement$map[1];\n\n    var axis = this.state.axis || (absX > absY ? 'x' : absX < absY ? 'y' : undefined);\n    if (!this.config.axis && !this.config.lockDirection) return {\n      _intentional: _intentional,\n      _blocked: false,\n      axis: axis\n    };\n    if (!axis) return {\n      _intentional: [false, false],\n      _blocked: false,\n      axis: axis\n    };\n    if (!!this.config.axis && axis !== this.config.axis) return {\n      _intentional: _intentional,\n      _blocked: true,\n      axis: axis\n    };\n    _intentional[axis === 'x' ? 1 : 0] = false;\n    return {\n      _intentional: _intentional,\n      _blocked: false,\n      axis: axis\n    };\n  };\n\n  _proto.getKinematics = function getKinematics(values, event) {\n    var state = this.getMovement(values);\n\n    if (!state._blocked) {\n      var dt = event.timeStamp - this.state.timeStamp;\n      Object.assign(state, calculateAllKinematics(state.movement, state.delta, dt));\n    }\n\n    return state;\n  };\n\n  _proto.mapStateValues = function mapStateValues(state) {\n    return {\n      xy: state.values,\n      vxvy: state.velocities\n    };\n  };\n\n  return CoordinatesRecognizer;\n}(Recognizer);\n\nvar TAP_DISTANCE_THRESHOLD = 3;\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nvar DragRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(DragRecognizer, _CoordinatesRecognize);\n\n  function DragRecognizer() {\n    var _this;\n\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'dragging';\n    _this.stateKey = 'drag'; // TODO add back when setPointerCapture is widely wupported\n    // https://caniuse.com/#search=setPointerCapture\n\n    _this.setPointerCapture = function (event) {\n      // don't perform pointere capture when user wants to use touch events or\n      // when a pointerLockElement exists as this would throw an error\n      if (_this.config.useTouch || document.pointerLockElement) return;\n      var target = event.target,\n          pointerId = event.pointerId;\n\n      if (target && 'setPointerCapture' in target) {\n        // this would work in the DOM but doesn't with react three fiber\n        // target.addEventListener('pointermove', this.onDragChange, this.controller.config.eventOptions)\n        // @ts-expect-error\n        target.setPointerCapture(pointerId);\n      }\n\n      _this.updateGestureState({\n        _dragTarget: target,\n        _dragPointerId: pointerId\n      });\n    };\n\n    _this.releasePointerCapture = function () {\n      if (_this.config.useTouch || document.pointerLockElement) return;\n      var _this$state = _this.state,\n          _dragTarget = _this$state._dragTarget,\n          _dragPointerId = _this$state._dragPointerId;\n\n      if (_dragPointerId && _dragTarget && 'releasePointerCapture' in _dragTarget) {\n        // this would work in the DOM but doesn't with react three fiber\n        // target.removeEventListener('pointermove', this.onDragChange, this.controller.config.eventOptions)\n        if (!('hasPointerCapture' in _dragTarget) || _dragTarget.hasPointerCapture(_dragPointerId)) try {\n          _dragTarget.releasePointerCapture(_dragPointerId);\n        } catch (e) {}\n      }\n    };\n\n    _this.preventScroll = function (event) {\n      if (_this.state._dragPreventScroll && event.cancelable) {\n        event.preventDefault();\n      }\n    };\n\n    _this.getEventId = function (event) {\n      if (_this.config.useTouch) return event.changedTouches[0].identifier;\n      return event.pointerId;\n    };\n\n    _this.isValidEvent = function (event) {\n      // if we were using pointer events only event.isPrimary === 1 would suffice\n      return _this.state._pointerId === _this.getEventId(event);\n    };\n\n    _this.shouldPreventWindowScrollY = _this.config.experimental_preventWindowScrollY && _this.controller.supportsTouchEvents;\n\n    _this.setUpWindowScrollDetection = function (event) {\n      persistEvent(event); // we add window listeners that will prevent the scroll when the user has started dragging\n\n      updateWindowListeners(_this.controller, _this.stateKey, [['touchmove', _this.preventScroll], ['touchend', _this.clean.bind(_assertThisInitialized(_this))], ['touchcancel', _this.clean.bind(_assertThisInitialized(_this))]], {\n        passive: false\n      });\n\n      _this.setTimeout(_this.startDrag.bind(_assertThisInitialized(_this)), 250, event);\n    };\n\n    _this.setUpDelayedDragTrigger = function (event) {\n      _this.state._dragDelayed = true;\n      persistEvent(event);\n\n      _this.setTimeout(_this.startDrag.bind(_assertThisInitialized(_this)), _this.config.delay, event);\n    };\n\n    _this.setStartState = function (event) {\n      var values = getPointerEventValues(event, _this.transform);\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        _pointerId: _this.getEventId(event)\n      }));\n\n      _this.updateGestureState(_this.getMovement(values));\n    };\n\n    _this.onDragStart = function (event) {\n      addEventIds(_this.controller, event);\n      if (!_this.enabled || _this.state._active) return;\n\n      _this.setStartState(event);\n\n      _this.setPointerCapture(event);\n\n      if (_this.shouldPreventWindowScrollY) _this.setUpWindowScrollDetection(event);else if (_this.config.delay > 0) _this.setUpDelayedDragTrigger(event);else _this.startDrag(event, true); // we pass the values to the startDrag event\n    };\n\n    _this.onDragChange = function (event) {\n      if ( // if the gesture was canceled or\n      _this.state.canceled || // if onDragStart wasn't fired or\n      !_this.state._active || // if the event pointerId doesn't match the one that initiated the drag\n      !_this.isValidEvent(event) || // if the event has the same timestamp as the previous event\n      // note that checking type equality is ONLY for tests \\_()_/\n      _this.state._lastEventType === event.type && event.timeStamp === _this.state.timeStamp) return;\n      var values;\n\n      if (document.pointerLockElement) {\n        var movementX = event.movementX,\n            movementY = event.movementY;\n        values = addV(_this.transform([movementX, movementY]), _this.state.values);\n      } else values = getPointerEventValues(event, _this.transform);\n\n      var kinematics = _this.getKinematics(values, event); // if startDrag hasn't fired\n\n\n      if (!_this.state._dragStarted) {\n        // If the gesture isn't active then respond to the event only if\n        // it's been delayed via the `delay` option, in which case start\n        // the gesture immediately.\n        if (_this.state._dragDelayed) {\n          _this.startDrag(event);\n\n          return;\n        } // if the user wants to prevent vertical window scroll when user starts dragging\n\n\n        if (_this.shouldPreventWindowScrollY) {\n          if (!_this.state._dragPreventScroll && kinematics.axis) {\n            // if the user is dragging horizontally then we should allow the drag\n            if (kinematics.axis === 'x') {\n              _this.startDrag(event);\n            } else {\n              _this.state._active = false;\n              return;\n            }\n          } else return;\n        } else return;\n      }\n\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData);\n\n      var genericPayload = getGenericPayload(_assertThisInitialized(_this), event); // This verifies if the drag can be assimilated to a tap by checking\n      // if the real distance of the drag (ie not accounting for the threshold) is\n      // greater than the TAP_DISTANCE_THRESHOLD.\n\n      var realDistance = calculateDistance(kinematics._movement);\n      var _dragIsTap = _this.state._dragIsTap;\n      if (_dragIsTap && realDistance >= TAP_DISTANCE_THRESHOLD) _dragIsTap = false;\n\n      _this.updateGestureState(_extends({}, genericPayload, kinematics, {\n        _dragIsTap: _dragIsTap\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onDragEnd = function (event) {\n      removeEventIds(_this.controller, event); // if the event pointerId doesn't match the one that initiated the drag\n      // we don't want to end the drag\n\n      if (!_this.isValidEvent(event)) return;\n\n      _this.clean(); // if the gesture is no longer active (ie canceled)\n      // don't do anything\n\n\n      if (!_this.state._active) return;\n      _this.state._active = false;\n      var tap = _this.state._dragIsTap;\n      var _this$state$velocitie = _this.state.velocities,\n          vx = _this$state$velocitie[0],\n          vy = _this$state$velocitie[1];\n      var _this$state$movement = _this.state.movement,\n          mx = _this$state$movement[0],\n          my = _this$state$movement[1];\n      var _this$state$_intentio = _this.state._intentional,\n          ix = _this$state$_intentio[0],\n          iy = _this$state$_intentio[1];\n      var _this$config$swipeVel = _this.config.swipeVelocity,\n          svx = _this$config$swipeVel[0],\n          svy = _this$config$swipeVel[1];\n      var _this$config$swipeDis = _this.config.swipeDistance,\n          sx = _this$config$swipeDis[0],\n          sy = _this$config$swipeDis[1];\n      var sd = _this.config.swipeDuration;\n\n      var endState = _extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getMovement(_this.state.values));\n\n      var swipe = [0, 0];\n\n      if (endState.elapsedTime < sd) {\n        if (ix !== false && Math.abs(vx) > svx && Math.abs(mx) > sx) swipe[0] = sign(vx);\n        if (iy !== false && Math.abs(vy) > svy && Math.abs(my) > sy) swipe[1] = sign(vy);\n      }\n\n      _this.updateSharedState({\n        buttons: 0\n      });\n\n      _this.updateGestureState(_extends({}, endState, {\n        tap: tap,\n        swipe: swipe\n      }));\n\n      _this.fireGestureHandler(_this.config.filterTaps && tap === true);\n    };\n\n    _this.clean = function () {\n      _CoordinatesRecognize.prototype.clean.call(_assertThisInitialized(_this));\n\n      _this.state._dragStarted = false;\n\n      _this.releasePointerCapture();\n\n      clearWindowListeners(_this.controller, _this.stateKey);\n    };\n\n    _this.onCancel = function () {\n      if (_this.state.canceled) return;\n\n      _this.updateGestureState({\n        canceled: true,\n        _active: false\n      });\n\n      _this.updateSharedState({\n        buttons: 0\n      });\n\n      setTimeout(function () {\n        return _this.fireGestureHandler();\n      }, 0);\n    };\n\n    _this.onClick = function (event) {\n      if (!_this.state._dragIsTap) event.stopPropagation();\n    };\n\n    return _this;\n  }\n\n  var _proto = DragRecognizer.prototype;\n\n  _proto.startDrag = function startDrag(event, onDragIsStart) {\n    if (onDragIsStart === void 0) {\n      onDragIsStart = false;\n    }\n\n    // startDrag can happen after a timeout, so we need to check if the gesture is still active\n    // as the user might have lift up the pointer in between.\n    if ( // if the gesture isn't active (probably means)\n    !this.state._active || // if the drag has already started we should ignore subsequent attempts\n    this.state._dragStarted) return;\n    if (!onDragIsStart) this.setStartState(event);\n    this.updateGestureState({\n      _dragStarted: true,\n      _dragPreventScroll: true,\n      cancel: this.onCancel\n    });\n    this.clearTimeout();\n    this.fireGestureHandler();\n  };\n\n  _proto.addBindings = function addBindings$1(bindings) {\n    if (this.config.useTouch) {\n      addBindings(bindings, 'onTouchStart', this.onDragStart);\n\n      addBindings(bindings, 'onTouchMove', this.onDragChange); // this is needed for react-three-fiber\n\n\n      addBindings(bindings, 'onTouchEnd', this.onDragEnd);\n\n      addBindings(bindings, 'onTouchCancel', this.onDragEnd);\n    } else {\n      addBindings(bindings, 'onPointerDown', this.onDragStart);\n\n      addBindings(bindings, 'onPointerMove', this.onDragChange); // this is needed for react-three-fiber\n\n\n      addBindings(bindings, 'onPointerUp', this.onDragEnd);\n\n      addBindings(bindings, 'onPointerCancel', this.onDragEnd);\n    }\n\n    if (this.config.filterTaps) {\n      var handler = this.controller.config.eventOptions.capture ? 'onClick' : 'onClickCapture';\n\n      addBindings(bindings, handler, this.onClick);\n    }\n  };\n\n  return DragRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Inlined from https://github.com/alexreardon/memoize-one\r\n */\nfunction memoizeOne(resultFn, isEqual) {\n  var lastThis;\n  var lastArgs = [];\n  var lastResult;\n  var calledOnce = false;\n\n  function memoized() {\n    for (var _len = arguments.length, newArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      newArgs[_key] = arguments[_key];\n    }\n\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    }\n\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  }\n\n  return memoized;\n}\n\n/**\r\n * Taken from https://github.com/FormidableLabs/react-fast-compare\r\n *\r\n * Dropped comments and ArrayBuffer handling\r\n */\nfunction equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length !== b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    var it;\n\n    if (typeof Map === 'function' && a instanceof Map && b instanceof Map) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n\n      while (!(i = it.next()).done) {\n        if (!b.has(i.value[0])) return false;\n      }\n\n      it = a.entries();\n\n      while (!(i = it.next()).done) {\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      }\n\n      return true;\n    }\n\n    if (typeof Set === 'function' && a instanceof Set && b instanceof Set) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n\n      while (!(i = it.next()).done) {\n        if (!b.has(i.value[0])) return false;\n      }\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    if (typeof Element !== 'undefined' && a instanceof Element) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (keys[i] === '_owner' && a.$$typeof) continue;\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise  NaN !== NaN  true\n  // eslint-disable-next-line no-self-compare\n\n\n  return a !== a && b !== b;\n}\n\nfunction isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if ((error.message || '').match(/stack|recursion/i)) {\n      // eslint-disable-next-line no-console\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n\n    throw error;\n  }\n}\n\n/**\r\n * Drag hook.\r\n *\r\n * @param handler - the function fired every time the drag gesture updates\r\n * @param [config={}] - the config object including generic options and drag options\r\n */\n\nfunction useDrag(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  RecognizersMap.set('drag', DragRecognizer);\n  var buildDragConfig = useRef();\n\n  if (!buildDragConfig.current) {\n    buildDragConfig.current = memoizeOne(_buildDragConfig, isEqual);\n  }\n\n  return useRecognizers({\n    drag: handler\n  }, buildDragConfig.current(config));\n}\n\n/**\r\n * @private\r\n * Abstract class for distance/angle-based gesture recongizers\r\n */\n\nvar DistanceAngleRecognizer = /*#__PURE__*/function (_Recognizer) {\n  _inheritsLoose(DistanceAngleRecognizer, _Recognizer);\n\n  function DistanceAngleRecognizer() {\n    return _Recognizer.apply(this, arguments) || this;\n  }\n\n  var _proto = DistanceAngleRecognizer.prototype;\n\n  _proto.getInternalMovement = function getInternalMovement(values, state) {\n    var prev_a = state.values[1]; // not be defined if ctrl+wheel is used for zoom only\n\n    var d = values[0],\n        _values$ = values[1],\n        a = _values$ === void 0 ? prev_a : _values$;\n    var delta_a = a - prev_a;\n    var next_turns = state.turns;\n    if (Math.abs(delta_a) > 270) next_turns += sign(delta_a);\n    return subV([d, a - 360 * next_turns], state.initial);\n  };\n\n  _proto.getKinematics = function getKinematics(values, event) {\n    var state = this.getMovement(values);\n    var turns = (values[1] - state._movement[1] - this.state.initial[1]) / 360;\n    var dt = event.timeStamp - this.state.timeStamp;\n\n    var _calculateAllKinemati = calculateAllKinematics(state.movement, state.delta, dt),\n        kinematics = _objectWithoutPropertiesLoose(_calculateAllKinemati, [\"distance\", \"velocity\"]);\n\n    return _extends({\n      turns: turns\n    }, state, kinematics);\n  };\n\n  _proto.mapStateValues = function mapStateValues(state) {\n    return {\n      da: state.values,\n      vdva: state.velocities\n    };\n  };\n\n  return DistanceAngleRecognizer;\n}(Recognizer);\n\nvar ZOOM_CONSTANT = 7;\nvar WEBKIT_DISTANCE_SCALE_FACTOR = 260;\nvar PinchRecognizer = /*#__PURE__*/function (_DistanceAngleRecogni) {\n  _inheritsLoose(PinchRecognizer, _DistanceAngleRecogni);\n\n  function PinchRecognizer() {\n    var _this;\n\n    _this = _DistanceAngleRecogni.apply(this, arguments) || this;\n    _this.ingKey = 'pinching';\n    _this.stateKey = 'pinch';\n\n    _this.onPinchStart = function (event) {\n      addEventIds(_this.controller, event);\n      var touchIds = _this.controller.touchIds;\n      if (!_this.enabled) return;\n\n      if (_this.state._active) {\n        // check that the pointerIds that initiated the gesture\n        // are still enabled. This is useful for when the page\n        // loses track of the pointers (minifying gesture on iPad).\n        if (_this.state._pointerIds.every(function (id) {\n          return touchIds.has(id);\n        })) return; // something was wrong with the pointers but we let it go.\n      } // until we reach two fingers on the target don't react\n\n\n      if (touchIds.size < 2) return;\n\n      var _pointerIds = Array.from(touchIds).slice(0, 2);\n\n      var _getTwoTouchesEventVa = getTwoTouchesEventValues(event, _pointerIds, _this.transform),\n          values = _getTwoTouchesEventVa.values,\n          origin = _getTwoTouchesEventVa.origin;\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        _pointerIds: _pointerIds,\n        cancel: _this.onCancel,\n        origin: origin\n      }));\n\n      _this.updateGestureState(_this.getMovement(values));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onPinchChange = function (event) {\n      var _this$state = _this.state,\n          canceled = _this$state.canceled,\n          _active = _this$state._active;\n      if (canceled || !_active || // if the event has the same timestamp as the previous event\n      event.timeStamp === _this.state.timeStamp) return;\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData);\n\n      try {\n        var _getTwoTouchesEventVa2 = getTwoTouchesEventValues(event, _this.state._pointerIds, _this.transform),\n            values = _getTwoTouchesEventVa2.values,\n            origin = _getTwoTouchesEventVa2.origin;\n\n        var kinematics = _this.getKinematics(values, event);\n\n        _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), kinematics, {\n          origin: origin\n        }));\n\n        _this.fireGestureHandler();\n      } catch (e) {\n        _this.onPinchEnd(event);\n      }\n    };\n\n    _this.onPinchEnd = function (event) {\n      removeEventIds(_this.controller, event);\n      var pointerIds = getTouchIds(event); // if none of the lifted pointerIds is in the state pointerIds don't do anything\n\n      if (_this.state._pointerIds.every(function (id) {\n        return !pointerIds.includes(id);\n      })) return;\n\n      _this.clean();\n\n      if (!_this.state._active) return;\n\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getMovement(_this.state.values), {\n        _active: false\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onCancel = function () {\n      if (_this.state.canceled) return;\n\n      _this.updateGestureState({\n        _active: false,\n        canceled: true\n      });\n\n      setTimeout(function () {\n        return _this.fireGestureHandler();\n      }, 0);\n    };\n    /**\r\n     * PINCH WITH WEBKIT GESTURES\r\n     */\n\n\n    _this.onGestureStart = function (event) {\n      if (!_this.enabled) return;\n      event.preventDefault();\n      var values = getWebkitGestureEventValues(event, _this.transform);\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        origin: [event.clientX, event.clientY],\n        cancel: _this.onCancel\n      }));\n\n      _this.updateGestureState(_this.getMovement(values));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onGestureChange = function (event) {\n      var _this$state2 = _this.state,\n          canceled = _this$state2.canceled,\n          _active = _this$state2._active;\n      if (canceled || !_active) return;\n      event.preventDefault();\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData); // this normalizes the values of the Safari's WebKitEvent by calculating\n      // the delta and then multiplying it by a constant.\n\n\n      var values = getWebkitGestureEventValues(event, _this.transform);\n      values[0] = (values[0] - _this.state.event.scale) * WEBKIT_DISTANCE_SCALE_FACTOR + _this.state.values[0];\n\n      var kinematics = _this.getKinematics(values, event);\n\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), kinematics, {\n        origin: [event.clientX, event.clientY]\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onGestureEnd = function (event) {\n      _this.clean();\n\n      if (!_this.state._active) return;\n\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getMovement(_this.state.values), {\n        _active: false,\n        origin: [event.clientX, event.clientY]\n      }));\n\n      _this.fireGestureHandler();\n    };\n    /**\r\n     * PINCH WITH WHEEL\r\n     */\n\n\n    _this.wheelShouldRun = function (event) {\n      return _this.enabled && event.ctrlKey;\n    };\n\n    _this.getWheelValuesFromEvent = function (event) {\n      var _getWheelEventValues = getWheelEventValues(event, _this.transform),\n          delta_d = _getWheelEventValues[1];\n\n      var _this$state$values = _this.state.values,\n          prev_d = _this$state$values[0],\n          prev_a = _this$state$values[1]; // ZOOM_CONSTANT is based on Safari trackpad natural zooming\n\n      var _delta_d = -delta_d * ZOOM_CONSTANT; // new distance is the previous state distance added to the delta\n\n\n      var d = prev_d + _delta_d;\n      var a = prev_a !== void 0 ? prev_a : 0;\n      return {\n        values: [d, a],\n        origin: [event.clientX, event.clientY],\n        delta: [_delta_d, a]\n      };\n    };\n\n    _this.onWheel = function (event) {\n      if (!_this.wheelShouldRun(event)) return;\n\n      _this.setTimeout(_this.onWheelEnd);\n\n      if (!_this.state._active) _this.onWheelStart(event);else _this.onWheelChange(event);\n    };\n\n    _this.onWheelStart = function (event) {\n      var _this$getWheelValuesF = _this.getWheelValuesFromEvent(event),\n          values = _this$getWheelValuesF.values,\n          delta = _this$getWheelValuesF.delta,\n          origin = _this$getWheelValuesF.origin;\n\n      if (event.cancelable) event.preventDefault();else if (process.env.NODE_ENV === 'development') {\n        // eslint-disable-next-line no-console\n        console.warn('To properly support zoom on trackpads, try using the `domTarget` option and `config.eventOptions.passive` set to `false`. This message will only appear in development mode.');\n      }\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event, _this.state.values), getGenericPayload(_assertThisInitialized(_this), event, true), {\n        offset: values,\n        delta: delta,\n        origin: origin\n      }));\n\n      _this.updateGestureState(_this.getMovement(values));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onWheelChange = function (event) {\n      if (event.cancelable) event.preventDefault();\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var _this$getWheelValuesF2 = _this.getWheelValuesFromEvent(event),\n          values = _this$getWheelValuesF2.values,\n          origin = _this$getWheelValuesF2.origin,\n          delta = _this$getWheelValuesF2.delta;\n\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event), {\n        origin: origin,\n        delta: delta\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onWheelEnd = function () {\n      _this.clean();\n\n      if (!_this.state._active) return;\n      _this.state._active = false;\n\n      _this.updateGestureState(_this.getMovement(_this.state.values));\n\n      _this.fireGestureHandler();\n    };\n\n    return _this;\n  }\n\n  var _proto = PinchRecognizer.prototype;\n\n  _proto.addBindings = function addBindings$1(bindings) {\n    // Only try to use gesture events when they are supported and domTarget is set\n    // as React doesn't support gesture handlers.\n    if (this.controller.config.domTarget && !this.controller.supportsTouchEvents && this.controller.supportsGestureEvents) {\n      addBindings(bindings, 'onGestureStart', this.onGestureStart);\n\n      addBindings(bindings, 'onGestureChange', this.onGestureChange);\n\n      addBindings(bindings, 'onGestureEnd', this.onGestureEnd);\n    } else {\n      addBindings(bindings, 'onTouchStart', this.onPinchStart);\n\n      addBindings(bindings, 'onTouchMove', this.onPinchChange);\n\n      addBindings(bindings, 'onTouchEnd', this.onPinchEnd);\n\n      addBindings(bindings, 'onTouchCancel', this.onPinchEnd);\n\n      addBindings(bindings, 'onWheel', this.onWheel);\n    }\n  };\n\n  return PinchRecognizer;\n}(DistanceAngleRecognizer);\n\n/**\r\n * Pinch hook.\r\n *\r\n * @param handler - the function fired every time the pinch gesture updates\r\n * @param [config={}] - the config object including generic options and pinch options\r\n */\n\nfunction usePinch(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  RecognizersMap.set('pinch', PinchRecognizer);\n  var buildPinchConfig = useRef();\n\n  if (!buildPinchConfig.current) {\n    buildPinchConfig.current = memoizeOne(_buildPinchConfig, isEqual);\n  }\n\n  return useRecognizers({\n    pinch: handler\n  }, buildPinchConfig.current(config));\n}\n\nvar WheelRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(WheelRecognizer, _CoordinatesRecognize);\n\n  function WheelRecognizer() {\n    var _this;\n\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'wheeling';\n    _this.stateKey = 'wheel';\n    _this.debounced = true;\n\n    _this.handleEvent = function (event) {\n      if (event.ctrlKey && 'pinch' in _this.controller.handlers) return;\n      if (!_this.enabled) return;\n\n      _this.setTimeout(_this.onEnd);\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var values = addV(getWheelEventValues(event, _this.transform), _this.state.values);\n\n      if (!_this.state._active) {\n        _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event, _this.state.values), getGenericPayload(_assertThisInitialized(_this), event, true)));\n\n        var movement = _this.getMovement(values);\n\n        var geometry = calculateAllGeometry(movement.delta);\n\n        _this.updateGestureState(movement);\n\n        _this.updateGestureState(geometry);\n      } else {\n        _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event)));\n      }\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onEnd = function () {\n      _this.clean();\n\n      if (!_this.state._active) return;\n\n      var movement = _this.getMovement(_this.state.values);\n\n      _this.updateGestureState(movement);\n\n      _this.updateGestureState({\n        _active: false,\n        velocities: [0, 0],\n        velocity: 0\n      });\n\n      _this.fireGestureHandler();\n    };\n\n    return _this;\n  }\n\n  var _proto = WheelRecognizer.prototype;\n\n  _proto.addBindings = function addBindings$1(bindings) {\n    addBindings(bindings, 'onWheel', this.handleEvent);\n  };\n\n  return WheelRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Wheel hook.\r\n *\r\n * @param handler - the function fired every time the wheel gesture updates\r\n * @param the config object including generic options and wheel options\r\n */\n\nfunction useWheel(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  RecognizersMap.set('wheel', WheelRecognizer);\n  var buildWheelConfig = useRef();\n\n  if (!buildWheelConfig.current) {\n    buildWheelConfig.current = memoizeOne(_buildWheelConfig, isEqual);\n  }\n\n  return useRecognizers({\n    wheel: handler\n  }, buildWheelConfig.current(config));\n}\n\nvar MoveRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(MoveRecognizer, _CoordinatesRecognize);\n\n  function MoveRecognizer() {\n    var _this;\n\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'moving';\n    _this.stateKey = 'move';\n    _this.debounced = true;\n\n    _this.onMove = function (event) {\n      if (!_this.enabled) return;\n\n      _this.setTimeout(_this.onMoveEnd);\n\n      if (!_this.state._active) _this.onMoveStart(event);else _this.onMoveChange(event);\n    };\n\n    _this.onMoveStart = function (event) {\n      _this.updateSharedState(getGenericEventData(event));\n\n      var values = getPointerEventValues(event, _this.transform);\n\n      _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event), getGenericPayload(_assertThisInitialized(_this), event, true)));\n\n      _this.updateGestureState(_this.getMovement(values));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onMoveChange = function (event) {\n      _this.updateSharedState(getGenericEventData(event));\n\n      var values = getPointerEventValues(event, _this.transform);\n\n      _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event)));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onMoveEnd = function () {\n      _this.clean();\n\n      if (!_this.state._active) return;\n      var values = _this.state.values;\n\n      _this.updateGestureState(_this.getMovement(values));\n\n      _this.updateGestureState({\n        velocities: [0, 0],\n        velocity: 0,\n        _active: false\n      });\n\n      _this.fireGestureHandler();\n    };\n\n    _this.hoverTransform = function () {\n      return _this.controller.config.hover.transform || _this.controller.config.transform;\n    };\n\n    _this.onPointerEnter = function (event) {\n      _this.controller.state.shared.hovering = true;\n      if (!_this.controller.config.enabled) return;\n\n      if (_this.controller.config.hover.enabled) {\n        var values = getPointerEventValues(event, _this.hoverTransform());\n\n        var state = _extends({}, _this.controller.state.shared, _this.state, getGenericPayload(_assertThisInitialized(_this), event, true), {\n          args: _this.args,\n          values: values,\n          active: true,\n          hovering: true\n        });\n\n        _this.controller.handlers.hover(_extends({}, state, _this.mapStateValues(state)));\n      }\n\n      if ('move' in _this.controller.handlers) _this.onMoveStart(event);\n    };\n\n    _this.onPointerLeave = function (event) {\n      _this.controller.state.shared.hovering = false;\n      if ('move' in _this.controller.handlers) _this.onMoveEnd();\n      if (!_this.controller.config.hover.enabled) return;\n      var values = getPointerEventValues(event, _this.hoverTransform());\n\n      var state = _extends({}, _this.controller.state.shared, _this.state, getGenericPayload(_assertThisInitialized(_this), event), {\n        args: _this.args,\n        values: values,\n        active: false\n      });\n\n      _this.controller.handlers.hover(_extends({}, state, _this.mapStateValues(state)));\n    };\n\n    return _this;\n  }\n\n  var _proto = MoveRecognizer.prototype;\n\n  _proto.addBindings = function addBindings$1(bindings) {\n    if ('move' in this.controller.handlers) {\n      addBindings(bindings, 'onPointerMove', this.onMove);\n    }\n\n    if ('hover' in this.controller.handlers) {\n      addBindings(bindings, 'onPointerEnter', this.onPointerEnter);\n\n      addBindings(bindings, 'onPointerLeave', this.onPointerLeave);\n    }\n  };\n\n  return MoveRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Move hook.\r\n *\r\n * @param handler - the function fired every time the move gesture updates\r\n * @param [config={}] - the config object including generic options and move options\r\n */\n\nfunction useMove(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  RecognizersMap.set('move', MoveRecognizer);\n  var buildMoveConfig = useRef();\n\n  if (!buildMoveConfig.current) {\n    buildMoveConfig.current = memoizeOne(_buildMoveConfig, isEqual);\n  }\n\n  return useRecognizers({\n    move: handler\n  }, buildMoveConfig.current(config));\n}\n\n/**\r\n * Hover hook.\r\n *\r\n * @param handler - the function fired every time the hover gesture updates\r\n * @param [config={}] - the config object including generic options and hover options\r\n */\n\nfunction useHover(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  RecognizersMap.set('hover', MoveRecognizer);\n  var buildHoverConfig = useRef();\n\n  if (!buildHoverConfig.current) {\n    buildHoverConfig.current = memoizeOne(_buildHoverConfig, isEqual);\n  }\n\n  return useRecognizers({\n    hover: handler\n  }, buildHoverConfig.current(config));\n}\n\nvar ScrollRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(ScrollRecognizer, _CoordinatesRecognize);\n\n  function ScrollRecognizer() {\n    var _this;\n\n    _this = _CoordinatesRecognize.apply(this, arguments) || this;\n    _this.ingKey = 'scrolling';\n    _this.stateKey = 'scroll';\n    _this.debounced = true;\n\n    _this.handleEvent = function (event) {\n      if (!_this.enabled) return;\n\n      _this.clearTimeout();\n\n      _this.setTimeout(_this.onEnd);\n\n      var values = getScrollEventValues(event, _this.transform);\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      if (!_this.state._active) {\n        _this.updateGestureState(_extends({}, getStartGestureState(_assertThisInitialized(_this), values, event, _this.state.values), getGenericPayload(_assertThisInitialized(_this), event, true)));\n\n        var movementDetection = _this.getMovement(values);\n\n        var geometry = calculateAllGeometry(movementDetection.delta);\n\n        _this.updateGestureState(movementDetection);\n\n        _this.updateGestureState(geometry);\n      } else {\n        _this.updateGestureState(_extends({}, getGenericPayload(_assertThisInitialized(_this), event), _this.getKinematics(values, event)));\n      }\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onEnd = function () {\n      _this.clean();\n\n      if (!_this.state._active) return;\n\n      _this.updateGestureState(_extends({}, _this.getMovement(_this.state.values), {\n        _active: false,\n        velocities: [0, 0],\n        velocity: 0\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    return _this;\n  }\n\n  var _proto = ScrollRecognizer.prototype;\n\n  _proto.addBindings = function addBindings$1(bindings) {\n    addBindings(bindings, 'onScroll', this.handleEvent);\n  };\n\n  return ScrollRecognizer;\n}(CoordinatesRecognizer);\n\n/**\r\n * Scroll hook.\r\n *\r\n * @param handler - the function fired every time the scroll gesture updates\r\n * @param [config={}] - the config object including generic options and scroll options\r\n */\n\nfunction useScroll(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  RecognizersMap.set('scroll', ScrollRecognizer);\n  var buildScrollConfig = useRef();\n\n  if (!buildScrollConfig.current) {\n    buildScrollConfig.current = memoizeOne(_buildScrollConfig, isEqual);\n  }\n\n  return useRecognizers({\n    scroll: handler\n  }, buildScrollConfig.current(config));\n}\n\nvar RE_NOT_NATIVE = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;\n\nfunction sortHandlers(handlers) {\n  var _native = {};\n  var handle = {};\n  var actions = new Set();\n\n  for (var key in handlers) {\n    if (RE_NOT_NATIVE.test(key)) {\n      actions.add(RegExp.lastMatch);\n      handle[key] = handlers[key];\n    } else {\n      _native[key] = handlers[key];\n    }\n  }\n\n  return [handle, _native, actions];\n}\n/**\r\n * @public\r\n *\r\n * The most complete gesture hook, allowing support for multiple gestures.\r\n *\r\n * @param {Handlers} handlers - an object with on[Gesture] keys containg gesture handlers\r\n * @param {UseGestureConfig} [config={}] - the full config object\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useGesture(_handlers, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _sortHandlers = sortHandlers(_handlers),\n      handlers = _sortHandlers[0],\n      nativeHandlers = _sortHandlers[1],\n      actions = _sortHandlers[2];\n\n  RecognizersMap.set('drag', DragRecognizer);\n  RecognizersMap.set('hover', MoveRecognizer);\n  RecognizersMap.set('move', MoveRecognizer);\n  RecognizersMap.set('pinch', PinchRecognizer);\n  RecognizersMap.set('scroll', ScrollRecognizer);\n  RecognizersMap.set('wheel', WheelRecognizer);\n  var mergedConfig = buildComplexConfig(config, actions);\n  var internalHandlers = {};\n  if (actions.has('onDrag')) internalHandlers.drag = includeStartEndHandlers(handlers, 'onDrag');\n  if (actions.has('onWheel')) internalHandlers.wheel = includeStartEndHandlers(handlers, 'onWheel');\n  if (actions.has('onScroll')) internalHandlers.scroll = includeStartEndHandlers(handlers, 'onScroll');\n  if (actions.has('onMove')) internalHandlers.move = includeStartEndHandlers(handlers, 'onMove');\n  if (actions.has('onPinch')) internalHandlers.pinch = includeStartEndHandlers(handlers, 'onPinch');\n  if (actions.has('onHover')) internalHandlers.hover = handlers.onHover;\n  return useRecognizers(internalHandlers, mergedConfig, nativeHandlers);\n}\n\nfunction includeStartEndHandlers(handlers, handlerKey) {\n  var startKey = handlerKey + 'Start';\n  var endKey = handlerKey + 'End';\n\n  var fn = function fn(state) {\n    var memo = undefined;\n    if (state.first && startKey in handlers) handlers[startKey](state);\n    if (handlerKey in handlers) memo = handlers[handlerKey](state);\n    if (state.last && endKey in handlers) handlers[endKey](state);\n    return memo;\n  };\n\n  return fn;\n}\n\nexport { addV, rubberbandIfOutOfBounds, subV, useDrag, useGesture, useHover, useMove, usePinch, useScroll, useWheel };\n//# sourceMappingURL=reactusegesture.esm.js.map\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}